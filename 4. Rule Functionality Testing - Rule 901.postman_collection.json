{
	"info": {
		"_postman_id": "2da90278-7101-4377-b194-ff9a917f0b1f",
		"name": "4. Rule Functionality Testing - Rule 901",
		"description": "This test collections performs comprehensive functionality testing against every deployed rule processor to test every possible outcome.\n\n## 2023/10/23\n\nUpdated testing of the rule result description to test for undefined\n\nUpdated testing of the rule result reason to test for undefined\n\n## 2024/02/26\n\nUpdated test utility library to handle the update to the DataCache to include the amount and the create date-time attributes.\n\nUpdated the utility library functions to take in a \"currency\" parameter that would default to \"XTS\" if specified as null.\n\nUpdated all rule tests to call the updated library functions with the currency parameter (null).\n\n## 2024/03/19\n\nCreated a set of tests for rule 901 exclusively",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "36352170"
	},
	"item": [
		{
			"name": "Setup",
			"item": [
				{
					"name": "Get Arango Token",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"let jsonData = pm.response.json();\r",
									"//console.log(jsonData[\"jwt\"])\r",
									"\r",
									"pm.globals.set(\"arangoToken\", jsonData[\"jwt\"])\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"username\": \"{{arangoUsername}}\",\r\n    \"password\": \"{{arangoPassword}}\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{arangoUrl}}/_open/auth",
							"host": [
								"{{arangoUrl}}"
							],
							"path": [
								"_open",
								"auth"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Rule 901",
			"item": [
				{
					"name": "1. Single transaction now -  sucessful",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"responseJSON = pm.response.json();\r",
									"let incomingRuleResult = responseJSON.data.ruleResult;\r",
									"let prcgTm = incomingRuleResult.prcgTm;\r",
									"targetRuleResult = {\r",
									"    \"id\": \"901@1.0.0\",\r",
									"    \"cfg\": \"1.0.0\",\r",
									"    \"subRuleRef\": \".01\",\r",
									"    \"reason\": \"The debtor has performed one transaction to date\",\r",
									"    \"desc\": \"Number of outgoing transactions - debtor\"\r",
									"};\r",
									"\r",
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"let activePain001 = JSON.parse(pm.environment.get('activePain001'));\r",
									"\r",
									"if (activePain001) {\r",
									"    pm.test(\"pain.001/013 is enabled\", function () {\r",
									"        pm.expect(activePain001).to.be.true;\r",
									"    });\r",
									"} else {\r",
									"    pm.test(\"pain.001/013 is disabled\", function () {\r",
									"        pm.expect(activePain001).to.be.false;\r",
									"    });\r",
									"}\r",
									"\r",
									"pm.test(\"ruleResult.id matches target rule result\", function () {\r",
									"    pm.expect(incomingRuleResult.id).to.be.eql(targetRuleResult.id);\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.cfg matches target rule result\", function () {\r",
									"    pm.expect(incomingRuleResult.cfg).to.be.eql(targetRuleResult.cfg);\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.result does not exist\", function () {\r",
									"    pm.expect(incomingRuleResult).to.not.have.property('result');\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.subRuleRef matches target rule result\", function () {\r",
									"    pm.expect(incomingRuleResult.subRuleRef).to.be.eql(targetRuleResult.subRuleRef);\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.reason is omitted\", function () {\r",
									"    pm.expect(incomingRuleResult.reason).to.be.eql(undefined);\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.desc is omitted\", function () {\r",
									"    pm.expect(incomingRuleResult.desc).to.be.eql(undefined);\r",
									"});\r",
									"\r",
									"pm.test(`Processing time: ${(prcgTm/1000000).toFixed(3)} milliseconds`, function () {\r",
									"    pm.expect(prcgTm).to.be.greaterThan(0);\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"utils.setPm(pm); // set the utils _pm to the pre-request script pm to access the utils functions\r",
									"\r",
									"// Set up the rule identity\r",
									"\r",
									"const rule = '901';\r",
									"const ruleVer = '1.0.0'\r",
									"const configVer = '1.0.0'\r",
									"const ruleId = `${rule}@${ruleVer}`;\r",
									"\r",
									"console.log(`Rule: ${ruleId}@${configVer}\r",
									"======================`);\r",
									"\r",
									"// Set up the transaction history ecosystem\r",
									"\r",
									"utils.createNewTransactionSet(\r",
									"    /* First set time */ null,                          // null defaults 0\r",
									"    /* Currency */ null,                                // null defaults 'XTS' - test currency'\r",
									"    /* Amount */ 1000,                                  // null defaults random up to 1000.00\r",
									"    /* Description */ null,                             // null defaults 'Generic payment description'\r",
									"    /* Status */ 'ACCC',                                // null defaults 'ACCC' (successful)\r",
									"    /* Debtor Age */ null,                              // null defaults 25\r",
									"    /* Transaction Type */ null,                        // null defaults 'TRANSFER'\r",
									"    /* Latitude */ null,                                // null defaults -3.1609\r",
									"    /* Longitude */ null                                // null defaults 38.3588\r",
									");\r",
									"\r",
									"// ## Set up body variables\r",
									"\r",
									"pm.variables.set('messageBody', utils.getRuleBody(ruleId, configVer, JSON.parse(pm.globals.get('pacs002')), JSON.parse(pm.globals.get('dataCache'))));"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{{messageBody}}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{natsUrl}}/{{path-rule-901-rel-1-0-0}}",
							"host": [
								"{{natsUrl}}"
							],
							"path": [
								"{{path-rule-901-rel-1-0-0}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "2. Single transaction now -  unsuccessful",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"responseJSON = pm.response.json();\r",
									"let incomingRuleResult = responseJSON.data.ruleResult;\r",
									"let prcgTm = incomingRuleResult.prcgTm;\r",
									"targetRuleResult = {\r",
									"    \"id\": \"901@1.0.0\",\r",
									"    \"cfg\": \"1.0.0\",\r",
									"    \"subRuleRef\": \".x00\",\r",
									"    \"reason\": \"Incoming transaction is unsuccessful\",\r",
									"    \"desc\": \"Number of outgoing transactions - debtor\"\r",
									"};\r",
									"\r",
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"let activePain001 = JSON.parse(pm.environment.get('activePain001'));\r",
									"\r",
									"if (activePain001) {\r",
									"    pm.test(\"pain.001/013 is enabled\", function () {\r",
									"        pm.expect(activePain001).to.be.true;\r",
									"    });\r",
									"} else {\r",
									"    pm.test(\"pain.001/013 is disabled\", function () {\r",
									"        pm.expect(activePain001).to.be.false;\r",
									"    });\r",
									"}\r",
									"\r",
									"pm.test(\"ruleResult.id matches target rule result\", function () {\r",
									"    pm.expect(incomingRuleResult.id).to.be.eql(targetRuleResult.id);\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.cfg matches target rule result\", function () {\r",
									"    pm.expect(incomingRuleResult.cfg).to.be.eql(targetRuleResult.cfg);\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.result does not exist\", function () {\r",
									"    pm.expect(incomingRuleResult).to.not.have.property('result');\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.subRuleRef matches target rule result\", function () {\r",
									"    pm.expect(incomingRuleResult.subRuleRef).to.be.eql(targetRuleResult.subRuleRef);\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.reason is omitted\", function () {\r",
									"    pm.expect(incomingRuleResult.reason).to.be.eql(undefined);\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.desc is omitted\", function () {\r",
									"    pm.expect(incomingRuleResult.desc).to.be.eql(undefined);\r",
									"});\r",
									"\r",
									"pm.test(`Processing time: ${(prcgTm/1000000).toFixed(3)} milliseconds`, function () {\r",
									"    pm.expect(prcgTm).to.be.greaterThan(0);\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"utils.setPm(pm); // set the utils _pm to the pre-request script pm to access the utils functions\r",
									"\r",
									"// Set up the rule identity\r",
									"\r",
									"const rule = '901';\r",
									"const ruleVer = '1.0.0'\r",
									"const configVer = '1.0.0'\r",
									"const ruleId = `${rule}@${ruleVer}`;\r",
									"\r",
									"console.log(`Rule: ${ruleId}@${configVer}\r",
									"======================`);\r",
									"\r",
									"// Set up the transaction history ecosystem\r",
									"\r",
									"utils.createNewTransactionSet(\r",
									"    /* First set time */ null,                          // null defaults 0\r",
									"    /* Currency */ null,                                // null defaults 'XTS' - test currency'\r",
									"    /* Amount */ 1000,                                  // null defaults random up to 1000.00\r",
									"    /* Description */ null,                             // null defaults 'Generic payment description'\r",
									"    /* Status */ 'ACSC',                                // null defaults 'ACCC' (successful)\r",
									"    /* Debtor Age */ null,                              // null defaults 25\r",
									"    /* Transaction Type */ null,                        // null defaults 'TRANSFER'\r",
									"    /* Latitude */ null,                                // null defaults -3.1609\r",
									"    /* Longitude */ null                                // null defaults 38.3588\r",
									");\r",
									"\r",
									"// ## Set up body variables\r",
									"\r",
									"pm.variables.set('messageBody', utils.getRuleBody(ruleId, configVer, JSON.parse(pm.globals.get('pacs002')), JSON.parse(pm.globals.get('dataCache'))));"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{{messageBody}}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{natsUrl}}/{{path-rule-901-rel-1-0-0}}",
							"host": [
								"{{natsUrl}}"
							],
							"path": [
								"{{path-rule-901-rel-1-0-0}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "3. 2 total transactions - all successful",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"responseJSON = pm.response.json();\r",
									"let incomingRuleResult = responseJSON.data.ruleResult;\r",
									"let prcgTm = incomingRuleResult.prcgTm;\r",
									"targetRuleResult = {\r",
									"    \"id\": \"901@1.0.0\",\r",
									"    \"cfg\": \"1.0.0\",\r",
									"    \"subRuleRef\": \".02\",\r",
									"    \"reason\": \"The debtor has performed two or three transactions to date\",\r",
									"    \"desc\": \"Number of outgoing transactions - debtor\"\r",
									"};\r",
									"\r",
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"let activePain001 = JSON.parse(pm.environment.get('activePain001'));\r",
									"\r",
									"if (activePain001) {\r",
									"    pm.test(\"pain.001/013 is enabled\", function () {\r",
									"        pm.expect(activePain001).to.be.true;\r",
									"    });\r",
									"} else {\r",
									"    pm.test(\"pain.001/013 is disabled\", function () {\r",
									"        pm.expect(activePain001).to.be.false;\r",
									"    });\r",
									"}\r",
									"\r",
									"pm.test(\"ruleResult.id matches target rule result\", function () {\r",
									"    pm.expect(incomingRuleResult.id).to.be.eql(targetRuleResult.id);\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.cfg matches target rule result\", function () {\r",
									"    pm.expect(incomingRuleResult.cfg).to.be.eql(targetRuleResult.cfg);\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.result does not exist\", function () {\r",
									"    pm.expect(incomingRuleResult).to.not.have.property('result');\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.subRuleRef matches target rule result\", function () {\r",
									"    pm.expect(incomingRuleResult.subRuleRef).to.be.eql(targetRuleResult.subRuleRef);\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.reason is omitted\", function () {\r",
									"    pm.expect(incomingRuleResult.reason).to.be.eql(undefined);\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.desc is omitted\", function () {\r",
									"    pm.expect(incomingRuleResult.desc).to.be.eql(undefined);\r",
									"});\r",
									"\r",
									"pm.test(`Processing time: ${(prcgTm/1000000).toFixed(3)} milliseconds`, function () {\r",
									"    pm.expect(prcgTm).to.be.greaterThan(0);\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"utils.setPm(pm); // set the utils _pm to the pre-request script pm to access the utils functions\r",
									"\r",
									"// Set up the rule identity\r",
									"\r",
									"const rule = '901';\r",
									"const ruleVer = '1.0.0'\r",
									"const configVer = '1.0.0'\r",
									"const ruleId = `${rule}@${ruleVer}`;\r",
									"\r",
									"console.log(`Rule: ${ruleId}@${configVer}\r",
									"======================`);\r",
									"\r",
									"// Set up the transaction history ecosystem\r",
									"\r",
									"let timeOffset = 0;\r",
									"\r",
									"utils.createNewTransactionSet(\r",
									"    /* First set time */ null,                          // null defaults 0\r",
									"    /* Currency */ null,                                // null defaults 'XTS' - test currency'\r",
									"    /* Amount */ 1000,                                  // null defaults random up to 1000.00\r",
									"    /* Description */ null,                             // null defaults 'Generic payment description'\r",
									"    /* Status */ 'ACCC',                                // null defaults 'ACCC' (successful)\r",
									"    /* Debtor Age */ null,                              // null defaults 25\r",
									"    /* Transaction Type */ null,                        // null defaults 'TRANSFER'\r",
									"    /* Latitude */ null,                                // null defaults -3.1609\r",
									"    /* Longitude */ null                                // null defaults 38.3588\r",
									"    );\r",
									"\r",
									"let dataCache = JSON.parse(pm.globals.get('dataCache'));\r",
									"\r",
									"timeOffset = utils.timeframe('hours') * 4\r",
									"utils.createMoreTransactionSets(\r",
									"    /* Number of sets = */ 1,                           // null defaults 1\r",
									"    /* Debtor ID */ dataCache.dbtrId,                   // null defaults random UUID\r",
									"    /* Debtor Account ID */ dataCache.dbtrAcctId,       // null defaults random UUID\r",
									"    /* Creditor ID */ null,                             // null defaults random UUID\r",
									"    /* Creditor Account ID */ null,                     // null defaults random UUID\r",
									"    /* First set time */ timeOffset,                    // null defaults 0\r",
									"    /* Time between sets */ null,                       // null defaults timestampEpoch/NumberOfSets\r",
									"    /* Currency */ null,                                // null defaults 'XTS' - test currency\r",
									"    /* Amount */ null,                                  // null defaults random up to 1000.00\r",
									"    /* Description */ null,                             // null defaults random UUID\r",
									"    /* Status */ 'ACCC',                                // null defaults 'ACCC' (successful)\r",
									"    /* Debtor Age */ null,                              // null defaults 25\r",
									"    /* Transaction Type */ null,                        // null defaults 'TRANSFER'\r",
									"    /* Latitude */ null,                                // null defaults -3.1609\r",
									"    /* Longitude */ null                                // null defaults 38.3588\r",
									"    );\r",
									"\r",
									"// ## Set up body variables\r",
									"\r",
									"pm.variables.set('messageBody', utils.getRuleBody(ruleId, configVer, JSON.parse(pm.globals.get('pacs002')), JSON.parse(pm.globals.get('dataCache'))));"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{{messageBody}}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{natsUrl}}/{{path-rule-901-rel-1-0-0}}",
							"host": [
								"{{natsUrl}}"
							],
							"path": [
								"{{path-rule-901-rel-1-0-0}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "4. 3 total transactions - all successful",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"responseJSON = pm.response.json();\r",
									"let incomingRuleResult = responseJSON.data.ruleResult;\r",
									"let prcgTm = incomingRuleResult.prcgTm;\r",
									"targetRuleResult = {\r",
									"    \"id\": \"901@1.0.0\",\r",
									"    \"cfg\": \"1.0.0\",\r",
									"    \"subRuleRef\": \".02\",\r",
									"    \"reason\": \"The debtor has performed two or three transactions to date\",\r",
									"    \"desc\": \"Number of outgoing transactions - debtor\"\r",
									"};\r",
									"\r",
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"let activePain001 = JSON.parse(pm.environment.get('activePain001'));\r",
									"\r",
									"if (activePain001) {\r",
									"    pm.test(\"pain.001/013 is enabled\", function () {\r",
									"        pm.expect(activePain001).to.be.true;\r",
									"    });\r",
									"} else {\r",
									"    pm.test(\"pain.001/013 is disabled\", function () {\r",
									"        pm.expect(activePain001).to.be.false;\r",
									"    });\r",
									"}\r",
									"\r",
									"pm.test(\"ruleResult.id matches target rule result\", function () {\r",
									"    pm.expect(incomingRuleResult.id).to.be.eql(targetRuleResult.id);\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.cfg matches target rule result\", function () {\r",
									"    pm.expect(incomingRuleResult.cfg).to.be.eql(targetRuleResult.cfg);\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.result does not exist\", function () {\r",
									"    pm.expect(incomingRuleResult).to.not.have.property('result');\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.subRuleRef matches target rule result\", function () {\r",
									"    pm.expect(incomingRuleResult.subRuleRef).to.be.eql(targetRuleResult.subRuleRef);\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.reason is omitted\", function () {\r",
									"    pm.expect(incomingRuleResult.reason).to.be.eql(undefined);\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.desc is omitted\", function () {\r",
									"    pm.expect(incomingRuleResult.desc).to.be.eql(undefined);\r",
									"});\r",
									"\r",
									"pm.test(`Processing time: ${(prcgTm/1000000).toFixed(3)} milliseconds`, function () {\r",
									"    pm.expect(prcgTm).to.be.greaterThan(0);\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"utils.setPm(pm); // set the utils _pm to the pre-request script pm to access the utils functions\r",
									"\r",
									"// Set up the rule identity\r",
									"\r",
									"const rule = '901';\r",
									"const ruleVer = '1.0.0'\r",
									"const configVer = '1.0.0'\r",
									"const ruleId = `${rule}@${ruleVer}`;\r",
									"\r",
									"console.log(`Rule: ${ruleId}@${configVer}\r",
									"======================`);\r",
									"\r",
									"// Set up the transaction history ecosystem\r",
									"\r",
									"let timeOffset = 0;\r",
									"\r",
									"utils.createNewTransactionSet(\r",
									"    /* First set time */ null,                          // null defaults 0\r",
									"    /* Currency */ null,                                // null defaults 'XTS' - test currency'\r",
									"    /* Amount */ 1000,                                  // null defaults random up to 1000.00\r",
									"    /* Description */ null,                             // null defaults 'Generic payment description'\r",
									"    /* Status */ 'ACCC',                                // null defaults 'ACCC' (successful)\r",
									"    /* Debtor Age */ null,                              // null defaults 25\r",
									"    /* Transaction Type */ null,                        // null defaults 'TRANSFER'\r",
									"    /* Latitude */ null,                                // null defaults -3.1609\r",
									"    /* Longitude */ null                                // null defaults 38.3588\r",
									"    );\r",
									"\r",
									"let dataCache = JSON.parse(pm.globals.get('dataCache'));\r",
									"\r",
									"timeOffset = utils.timeframe('hours') * 4\r",
									"utils.createMoreTransactionSets(\r",
									"    /* Number of sets = */ 2,                           // null defaults 1\r",
									"    /* Debtor ID */ dataCache.dbtrId,                   // null defaults random UUID\r",
									"    /* Debtor Account ID */ dataCache.dbtrAcctId,       // null defaults random UUID\r",
									"    /* Creditor ID */ null,                             // null defaults random UUID\r",
									"    /* Creditor Account ID */ null,                     // null defaults random UUID\r",
									"    /* First set time */ timeOffset,                    // null defaults 0\r",
									"    /* Time between sets */ null,                       // null defaults timestampEpoch/NumberOfSets\r",
									"    /* Currency */ null,                                // null defaults 'XTS' - test currency\r",
									"    /* Amount */ null,                                  // null defaults random up to 1000.00\r",
									"    /* Description */ null,                             // null defaults random UUID\r",
									"    /* Status */ 'ACCC',                                // null defaults 'ACCC' (successful)\r",
									"    /* Debtor Age */ null,                              // null defaults 25\r",
									"    /* Transaction Type */ null,                        // null defaults 'TRANSFER'\r",
									"    /* Latitude */ null,                                // null defaults -3.1609\r",
									"    /* Longitude */ null                                // null defaults 38.3588\r",
									"    );\r",
									"\r",
									"// ## Set up body variables\r",
									"\r",
									"pm.variables.set('messageBody', utils.getRuleBody(ruleId, configVer, JSON.parse(pm.globals.get('pacs002')), JSON.parse(pm.globals.get('dataCache'))));"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{{messageBody}}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{natsUrl}}/{{path-rule-901-rel-1-0-0}}",
							"host": [
								"{{natsUrl}}"
							],
							"path": [
								"{{path-rule-901-rel-1-0-0}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "5. 4 total transactions - all successful",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"responseJSON = pm.response.json();\r",
									"let incomingRuleResult = responseJSON.data.ruleResult;\r",
									"let prcgTm = incomingRuleResult.prcgTm;\r",
									"targetRuleResult = {\r",
									"    \"id\": \"901@1.0.0\",\r",
									"    \"cfg\": \"1.0.0\",\r",
									"    \"subRuleRef\": \".03\",\r",
									"    \"reason\": \"The debtor has performed 4 or more transactions to date\",\r",
									"    \"desc\": \"Number of outgoing transactions - debtor\"\r",
									"};\r",
									"\r",
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"let activePain001 = JSON.parse(pm.environment.get('activePain001'));\r",
									"\r",
									"if (activePain001) {\r",
									"    pm.test(\"pain.001/013 is enabled\", function () {\r",
									"        pm.expect(activePain001).to.be.true;\r",
									"    });\r",
									"} else {\r",
									"    pm.test(\"pain.001/013 is disabled\", function () {\r",
									"        pm.expect(activePain001).to.be.false;\r",
									"    });\r",
									"}\r",
									"\r",
									"pm.test(\"ruleResult.id matches target rule result\", function () {\r",
									"    pm.expect(incomingRuleResult.id).to.be.eql(targetRuleResult.id);\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.cfg matches target rule result\", function () {\r",
									"    pm.expect(incomingRuleResult.cfg).to.be.eql(targetRuleResult.cfg);\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.result does not exist\", function () {\r",
									"    pm.expect(incomingRuleResult).to.not.have.property('result');\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.subRuleRef matches target rule result\", function () {\r",
									"    pm.expect(incomingRuleResult.subRuleRef).to.be.eql(targetRuleResult.subRuleRef);\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.reason is omitted\", function () {\r",
									"    pm.expect(incomingRuleResult.reason).to.be.eql(undefined);\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.desc is omitted\", function () {\r",
									"    pm.expect(incomingRuleResult.desc).to.be.eql(undefined);\r",
									"});\r",
									"\r",
									"pm.test(`Processing time: ${(prcgTm/1000000).toFixed(3)} milliseconds`, function () {\r",
									"    pm.expect(prcgTm).to.be.greaterThan(0);\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"utils.setPm(pm); // set the utils _pm to the pre-request script pm to access the utils functions\r",
									"\r",
									"// Set up the rule identity\r",
									"\r",
									"const rule = '901';\r",
									"const ruleVer = '1.0.0'\r",
									"const configVer = '1.0.0'\r",
									"const ruleId = `${rule}@${ruleVer}`;\r",
									"\r",
									"console.log(`Rule: ${ruleId}@${configVer}\r",
									"======================`);\r",
									"\r",
									"// Set up the transaction history ecosystem\r",
									"\r",
									"let timeOffset = 0;\r",
									"\r",
									"utils.createNewTransactionSet(\r",
									"    /* First set time */ null,                          // null defaults 0\r",
									"    /* Currency */ null,                                // null defaults 'XTS' - test currency'\r",
									"    /* Amount */ 1000,                                  // null defaults random up to 1000.00\r",
									"    /* Description */ null,                             // null defaults 'Generic payment description'\r",
									"    /* Status */ 'ACCC',                                // null defaults 'ACCC' (successful)\r",
									"    /* Debtor Age */ null,                              // null defaults 25\r",
									"    /* Transaction Type */ null,                        // null defaults 'TRANSFER'\r",
									"    /* Latitude */ null,                                // null defaults -3.1609\r",
									"    /* Longitude */ null                                // null defaults 38.3588\r",
									"    );\r",
									"\r",
									"let dataCache = JSON.parse(pm.globals.get('dataCache'));\r",
									"\r",
									"timeOffset = utils.timeframe('hours') * 4\r",
									"utils.createMoreTransactionSets(\r",
									"    /* Number of sets = */ 3,                           // null defaults 1\r",
									"    /* Debtor ID */ dataCache.dbtrId,                   // null defaults random UUID\r",
									"    /* Debtor Account ID */ dataCache.dbtrAcctId,       // null defaults random UUID\r",
									"    /* Creditor ID */ null,                             // null defaults random UUID\r",
									"    /* Creditor Account ID */ null,                     // null defaults random UUID\r",
									"    /* First set time */ timeOffset,                    // null defaults 0\r",
									"    /* Time between sets */ null,                       // null defaults timestampEpoch/NumberOfSets\r",
									"    /* Currency */ null,                                // null defaults 'XTS' - test currency\r",
									"    /* Amount */ null,                                  // null defaults random up to 1000.00\r",
									"    /* Description */ null,                             // null defaults random UUID\r",
									"    /* Status */ 'ACCC',                                // null defaults 'ACCC' (successful)\r",
									"    /* Debtor Age */ null,                              // null defaults 25\r",
									"    /* Transaction Type */ null,                        // null defaults 'TRANSFER'\r",
									"    /* Latitude */ null,                                // null defaults -3.1609\r",
									"    /* Longitude */ null                                // null defaults 38.3588\r",
									"    );\r",
									"\r",
									"// ## Set up body variables\r",
									"\r",
									"pm.variables.set('messageBody', utils.getRuleBody(ruleId, configVer, JSON.parse(pm.globals.get('pacs002')), JSON.parse(pm.globals.get('dataCache'))));"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{{messageBody}}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{natsUrl}}/{{path-rule-901-rel-1-0-0}}",
							"host": [
								"{{natsUrl}}"
							],
							"path": [
								"{{path-rule-901-rel-1-0-0}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "6. 4 total transactions - incoming unsuccessful, history successful",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"responseJSON = pm.response.json();\r",
									"let incomingRuleResult = responseJSON.data.ruleResult;\r",
									"let prcgTm = incomingRuleResult.prcgTm;\r",
									"targetRuleResult = {\r",
									"    \"id\": \"901@1.0.0\",\r",
									"    \"cfg\": \"1.0.0\",\r",
									"    \"subRuleRef\": \".x00\",\r",
									"    \"reason\": \"Incoming transaction is unsuccessful\",\r",
									"    \"desc\": \"Number of outgoing transactions - debtor\"\r",
									"};\r",
									"\r",
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"let activePain001 = JSON.parse(pm.environment.get('activePain001'));\r",
									"\r",
									"if (activePain001) {\r",
									"    pm.test(\"pain.001/013 is enabled\", function () {\r",
									"        pm.expect(activePain001).to.be.true;\r",
									"    });\r",
									"} else {\r",
									"    pm.test(\"pain.001/013 is disabled\", function () {\r",
									"        pm.expect(activePain001).to.be.false;\r",
									"    });\r",
									"}\r",
									"\r",
									"pm.test(\"ruleResult.id matches target rule result\", function () {\r",
									"    pm.expect(incomingRuleResult.id).to.be.eql(targetRuleResult.id);\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.cfg matches target rule result\", function () {\r",
									"    pm.expect(incomingRuleResult.cfg).to.be.eql(targetRuleResult.cfg);\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.result does not exist\", function () {\r",
									"    pm.expect(incomingRuleResult).to.not.have.property('result');\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.subRuleRef matches target rule result\", function () {\r",
									"    pm.expect(incomingRuleResult.subRuleRef).to.be.eql(targetRuleResult.subRuleRef);\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.reason is omitted\", function () {\r",
									"    pm.expect(incomingRuleResult.reason).to.be.eql(undefined);\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.desc is omitted\", function () {\r",
									"    pm.expect(incomingRuleResult.desc).to.be.eql(undefined);\r",
									"});\r",
									"\r",
									"pm.test(`Processing time: ${(prcgTm/1000000).toFixed(3)} milliseconds`, function () {\r",
									"    pm.expect(prcgTm).to.be.greaterThan(0);\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"utils.setPm(pm); // set the utils _pm to the pre-request script pm to access the utils functions\r",
									"\r",
									"// Set up the rule identity\r",
									"\r",
									"const rule = '901';\r",
									"const ruleVer = '1.0.0'\r",
									"const configVer = '1.0.0'\r",
									"const ruleId = `${rule}@${ruleVer}`;\r",
									"\r",
									"console.log(`Rule: ${ruleId}@${configVer}\r",
									"======================`);\r",
									"\r",
									"// Set up the transaction history ecosystem\r",
									"\r",
									"let timeOffset = 0;\r",
									"\r",
									"utils.createNewTransactionSet(\r",
									"    /* First set time */ null,                          // null defaults 0\r",
									"    /* Currency */ null,                                // null defaults 'XTS' - test currency'\r",
									"    /* Amount */ 1000,                                  // null defaults random up to 1000.00\r",
									"    /* Description */ null,                             // null defaults 'Generic payment description'\r",
									"    /* Status */ 'ACSC',                                // null defaults 'ACCC' (successful)\r",
									"    /* Debtor Age */ null,                              // null defaults 25\r",
									"    /* Transaction Type */ null,                        // null defaults 'TRANSFER'\r",
									"    /* Latitude */ null,                                // null defaults -3.1609\r",
									"    /* Longitude */ null                                // null defaults 38.3588\r",
									"    );\r",
									"\r",
									"let dataCache = JSON.parse(pm.globals.get('dataCache'));\r",
									"\r",
									"timeOffset = utils.timeframe('hours') * 4\r",
									"utils.createMoreTransactionSets(\r",
									"    /* Number of sets = */ 3,                           // null defaults 1\r",
									"    /* Debtor ID */ dataCache.dbtrId,                   // null defaults random UUID\r",
									"    /* Debtor Account ID */ dataCache.dbtrAcctId,       // null defaults random UUID\r",
									"    /* Creditor ID */ null,                             // null defaults random UUID\r",
									"    /* Creditor Account ID */ null,                     // null defaults random UUID\r",
									"    /* First set time */ timeOffset,                    // null defaults 0\r",
									"    /* Time between sets */ null,                       // null defaults timestampEpoch/NumberOfSets\r",
									"    /* Currency */ null,                                // null defaults 'XTS' - test currency\r",
									"    /* Amount */ null,                                  // null defaults random up to 1000.00\r",
									"    /* Description */ null,                             // null defaults random UUID\r",
									"    /* Status */ 'ACCC',                                // null defaults 'ACCC' (successful)\r",
									"    /* Debtor Age */ null,                              // null defaults 25\r",
									"    /* Transaction Type */ null,                        // null defaults 'TRANSFER'\r",
									"    /* Latitude */ null,                                // null defaults -3.1609\r",
									"    /* Longitude */ null                                // null defaults 38.3588\r",
									"    );\r",
									"\r",
									"// ## Set up body variables\r",
									"\r",
									"pm.variables.set('messageBody', utils.getRuleBody(ruleId, configVer, JSON.parse(pm.globals.get('pacs002')), JSON.parse(pm.globals.get('dataCache'))));"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{{messageBody}}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{natsUrl}}/{{path-rule-901-rel-1-0-0}}",
							"host": [
								"{{natsUrl}}"
							],
							"path": [
								"{{path-rule-901-rel-1-0-0}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "7. 4 total transactions - incoming successful, history unsuccessful",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"responseJSON = pm.response.json();\r",
									"let incomingRuleResult = responseJSON.data.ruleResult;\r",
									"let prcgTm = incomingRuleResult.prcgTm;\r",
									"targetRuleResult = {\r",
									"    \"id\": \"901@1.0.0\",\r",
									"    \"cfg\": \"1.0.0\",\r",
									"    \"subRuleRef\": \".03\",\r",
									"    \"reason\": \"The debtor has performed 4 or more transactions to date\",\r",
									"    \"desc\": \"Number of outgoing transactions - debtor\"\r",
									"};\r",
									"\r",
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"let activePain001 = JSON.parse(pm.environment.get('activePain001'));\r",
									"\r",
									"if (activePain001) {\r",
									"    pm.test(\"pain.001/013 is enabled\", function () {\r",
									"        pm.expect(activePain001).to.be.true;\r",
									"    });\r",
									"} else {\r",
									"    pm.test(\"pain.001/013 is disabled\", function () {\r",
									"        pm.expect(activePain001).to.be.false;\r",
									"    });\r",
									"}\r",
									"\r",
									"pm.test(\"ruleResult.id matches target rule result\", function () {\r",
									"    pm.expect(incomingRuleResult.id).to.be.eql(targetRuleResult.id);\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.cfg matches target rule result\", function () {\r",
									"    pm.expect(incomingRuleResult.cfg).to.be.eql(targetRuleResult.cfg);\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.result does not exist\", function () {\r",
									"    pm.expect(incomingRuleResult).to.not.have.property('result');\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.subRuleRef matches target rule result\", function () {\r",
									"    pm.expect(incomingRuleResult.subRuleRef).to.be.eql(targetRuleResult.subRuleRef);\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.reason is omitted\", function () {\r",
									"    pm.expect(incomingRuleResult.reason).to.be.eql(undefined);\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.desc is omitted\", function () {\r",
									"    pm.expect(incomingRuleResult.desc).to.be.eql(undefined);\r",
									"});\r",
									"\r",
									"pm.test(`Processing time: ${(prcgTm/1000000).toFixed(3)} milliseconds`, function () {\r",
									"    pm.expect(prcgTm).to.be.greaterThan(0);\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"utils.setPm(pm); // set the utils _pm to the pre-request script pm to access the utils functions\r",
									"\r",
									"// Set up the rule identity\r",
									"\r",
									"const rule = '901';\r",
									"const ruleVer = '1.0.0'\r",
									"const configVer = '1.0.0'\r",
									"const ruleId = `${rule}@${ruleVer}`;\r",
									"\r",
									"console.log(`Rule: ${ruleId}@${configVer}\r",
									"======================`);\r",
									"\r",
									"// Set up the transaction history ecosystem\r",
									"\r",
									"let timeOffset = 0;\r",
									"\r",
									"utils.createNewTransactionSet(\r",
									"    /* First set time */ null,                          // null defaults 0\r",
									"    /* Currency */ null,                                // null defaults 'XTS' - test currency'\r",
									"    /* Amount */ 1000,                                  // null defaults random up to 1000.00\r",
									"    /* Description */ null,                             // null defaults 'Generic payment description'\r",
									"    /* Status */ 'ACCC',                                // null defaults 'ACCC' (successful)\r",
									"    /* Debtor Age */ null,                              // null defaults 25\r",
									"    /* Transaction Type */ null,                        // null defaults 'TRANSFER'\r",
									"    /* Latitude */ null,                                // null defaults -3.1609\r",
									"    /* Longitude */ null                                // null defaults 38.3588\r",
									"    );\r",
									"\r",
									"let dataCache = JSON.parse(pm.globals.get('dataCache'));\r",
									"\r",
									"timeOffset = utils.timeframe('hours') * 4\r",
									"utils.createMoreTransactionSets(\r",
									"    /* Number of sets = */ 3,                           // null defaults 1\r",
									"    /* Debtor ID */ dataCache.dbtrId,                   // null defaults random UUID\r",
									"    /* Debtor Account ID */ dataCache.dbtrAcctId,       // null defaults random UUID\r",
									"    /* Creditor ID */ null,                             // null defaults random UUID\r",
									"    /* Creditor Account ID */ null,                     // null defaults random UUID\r",
									"    /* First set time */ timeOffset,                    // null defaults 0\r",
									"    /* Time between sets */ null,                       // null defaults timestampEpoch/NumberOfSets\r",
									"    /* Currency */ null,                                // null defaults 'XTS' - test currency\r",
									"    /* Amount */ null,                                  // null defaults random up to 1000.00\r",
									"    /* Description */ null,                             // null defaults random UUID\r",
									"    /* Status */ 'ACSC',                                // null defaults 'ACCC' (successful)\r",
									"    /* Debtor Age */ null,                              // null defaults 25\r",
									"    /* Transaction Type */ null,                        // null defaults 'TRANSFER'\r",
									"    /* Latitude */ null,                                // null defaults -3.1609\r",
									"    /* Longitude */ null                                // null defaults 38.3588\r",
									"    );\r",
									"\r",
									"// ## Set up body variables\r",
									"\r",
									"pm.variables.set('messageBody', utils.getRuleBody(ruleId, configVer, JSON.parse(pm.globals.get('pacs002')), JSON.parse(pm.globals.get('dataCache'))));"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{{messageBody}}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{natsUrl}}/{{path-rule-901-rel-1-0-0}}",
							"host": [
								"{{natsUrl}}"
							],
							"path": [
								"{{path-rule-901-rel-1-0-0}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "8. 4 total transactions - incoming successful, history successful, 1 transaction more than a day ago",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"responseJSON = pm.response.json();\r",
									"let incomingRuleResult = responseJSON.data.ruleResult;\r",
									"let prcgTm = incomingRuleResult.prcgTm;\r",
									"targetRuleResult = {\r",
									"    \"id\": \"901@1.0.0\",\r",
									"    \"cfg\": \"1.0.0\",\r",
									"    \"subRuleRef\": \".02\",\r",
									"    \"reason\": \"The debtor has performed two or three transactions to date\",\r",
									"    \"desc\": \"Number of outgoing transactions - debtor\"\r",
									"};\r",
									"\r",
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"let activePain001 = JSON.parse(pm.environment.get('activePain001'));\r",
									"\r",
									"if (activePain001) {\r",
									"    pm.test(\"pain.001/013 is enabled\", function () {\r",
									"        pm.expect(activePain001).to.be.true;\r",
									"    });\r",
									"} else {\r",
									"    pm.test(\"pain.001/013 is disabled\", function () {\r",
									"        pm.expect(activePain001).to.be.false;\r",
									"    });\r",
									"}\r",
									"\r",
									"pm.test(\"ruleResult.id matches target rule result\", function () {\r",
									"    pm.expect(incomingRuleResult.id).to.be.eql(targetRuleResult.id);\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.cfg matches target rule result\", function () {\r",
									"    pm.expect(incomingRuleResult.cfg).to.be.eql(targetRuleResult.cfg);\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.result does not exist\", function () {\r",
									"    pm.expect(incomingRuleResult).to.not.have.property('result');\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.subRuleRef matches target rule result\", function () {\r",
									"    pm.expect(incomingRuleResult.subRuleRef).to.be.eql(targetRuleResult.subRuleRef);\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.reason is omitted\", function () {\r",
									"    pm.expect(incomingRuleResult.reason).to.be.eql(undefined);\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.desc is omitted\", function () {\r",
									"    pm.expect(incomingRuleResult.desc).to.be.eql(undefined);\r",
									"});\r",
									"\r",
									"pm.test(`Processing time: ${(prcgTm/1000000).toFixed(3)} milliseconds`, function () {\r",
									"    pm.expect(prcgTm).to.be.greaterThan(0);\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"utils.setPm(pm); // set the utils _pm to the pre-request script pm to access the utils functions\r",
									"\r",
									"// Set up the rule identity\r",
									"\r",
									"const rule = '901';\r",
									"const ruleVer = '1.0.0'\r",
									"const configVer = '1.0.0'\r",
									"const ruleId = `${rule}@${ruleVer}`;\r",
									"\r",
									"console.log(`Rule: ${ruleId}@${configVer}\r",
									"======================`);\r",
									"\r",
									"// Set up the transaction history ecosystem\r",
									"\r",
									"let timeOffset = 0;\r",
									"\r",
									"utils.createNewTransactionSet(\r",
									"    /* First set time */ null,                          // null defaults 0\r",
									"    /* Currency */ null,                                // null defaults 'XTS' - test currency'\r",
									"    /* Amount */ 1000,                                  // null defaults random up to 1000.00\r",
									"    /* Description */ null,                             // null defaults 'Generic payment description'\r",
									"    /* Status */ 'ACCC',                                // null defaults 'ACCC' (successful)\r",
									"    /* Debtor Age */ null,                              // null defaults 25\r",
									"    /* Transaction Type */ null,                        // null defaults 'TRANSFER'\r",
									"    /* Latitude */ null,                                // null defaults -3.1609\r",
									"    /* Longitude */ null                                // null defaults 38.3588\r",
									"    );\r",
									"\r",
									"let dataCache = JSON.parse(pm.globals.get('dataCache'));\r",
									"\r",
									"timeOffset = utils.timeframe('hours') * 4\r",
									"utils.createMoreTransactionSets(\r",
									"    /* Number of sets = */ 2,                           // null defaults 1\r",
									"    /* Debtor ID */ dataCache.dbtrId,                   // null defaults random UUID\r",
									"    /* Debtor Account ID */ dataCache.dbtrAcctId,       // null defaults random UUID\r",
									"    /* Creditor ID */ null,                             // null defaults random UUID\r",
									"    /* Creditor Account ID */ null,                     // null defaults random UUID\r",
									"    /* First set time */ timeOffset,                    // null defaults 0\r",
									"    /* Time between sets */ null,                       // null defaults timestampEpoch/NumberOfSets\r",
									"    /* Currency */ null,                                // null defaults 'XTS' - test currency\r",
									"    /* Amount */ null,                                  // null defaults random up to 1000.00\r",
									"    /* Description */ null,                             // null defaults random UUID\r",
									"    /* Status */ 'ACSC',                                // null defaults 'ACCC' (successful)\r",
									"    /* Debtor Age */ null,                              // null defaults 25\r",
									"    /* Transaction Type */ null,                        // null defaults 'TRANSFER'\r",
									"    /* Latitude */ null,                                // null defaults -3.1609\r",
									"    /* Longitude */ null                                // null defaults 38.3588\r",
									"    );\r",
									"\r",
									"timeOffset = (utils.timeframe('days') * 1) + (utils.timeframe('hours') * 1);\r",
									"utils.createMoreTransactionSets(\r",
									"    /* Number of sets = */ 1,                           // null defaults 1\r",
									"    /* Debtor ID */ dataCache.dbtrId,                   // null defaults random UUID\r",
									"    /* Debtor Account ID */ dataCache.dbtrAcctId,       // null defaults random UUID\r",
									"    /* Creditor ID */ null,                             // null defaults random UUID\r",
									"    /* Creditor Account ID */ null,                     // null defaults random UUID\r",
									"    /* First set time */ timeOffset,                    // null defaults 0\r",
									"    /* Time between sets */ null,                       // null defaults timestampEpoch/NumberOfSets\r",
									"    /* Currency */ null,                                // null defaults 'XTS' - test currency\r",
									"    /* Amount */ null,                                  // null defaults random up to 1000.00\r",
									"    /* Description */ null,                             // null defaults random UUID\r",
									"    /* Status */ 'ACSC',                                // null defaults 'ACCC' (successful)\r",
									"    /* Debtor Age */ null,                              // null defaults 25\r",
									"    /* Transaction Type */ null,                        // null defaults 'TRANSFER'\r",
									"    /* Latitude */ null,                                // null defaults -3.1609\r",
									"    /* Longitude */ null                                // null defaults 38.3588\r",
									"    );\r",
									"\r",
									"// ## Set up body variables\r",
									"\r",
									"pm.variables.set('messageBody', utils.getRuleBody(ruleId, configVer, JSON.parse(pm.globals.get('pacs002')), JSON.parse(pm.globals.get('dataCache'))));"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{{messageBody}}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{natsUrl}}/{{path-rule-901-rel-1-0-0}}",
							"host": [
								"{{natsUrl}}"
							],
							"path": [
								"{{path-rule-901-rel-1-0-0}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "9. 4 total transactions - incoming successful, history successful, 1 transaction more than a day in the future",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"responseJSON = pm.response.json();\r",
									"let incomingRuleResult = responseJSON.data.ruleResult;\r",
									"let prcgTm = incomingRuleResult.prcgTm;\r",
									"targetRuleResult = {\r",
									"    \"id\": \"901@1.0.0\",\r",
									"    \"cfg\": \"1.0.0\",\r",
									"    \"subRuleRef\": \".02\",\r",
									"    \"reason\": \"The debtor has performed two or three transactions to date\",\r",
									"    \"desc\": \"Number of outgoing transactions - debtor\"\r",
									"};\r",
									"\r",
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"let activePain001 = JSON.parse(pm.environment.get('activePain001'));\r",
									"\r",
									"if (activePain001) {\r",
									"    pm.test(\"pain.001/013 is enabled\", function () {\r",
									"        pm.expect(activePain001).to.be.true;\r",
									"    });\r",
									"} else {\r",
									"    pm.test(\"pain.001/013 is disabled\", function () {\r",
									"        pm.expect(activePain001).to.be.false;\r",
									"    });\r",
									"}\r",
									"\r",
									"pm.test(\"ruleResult.id matches target rule result\", function () {\r",
									"    pm.expect(incomingRuleResult.id).to.be.eql(targetRuleResult.id);\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.cfg matches target rule result\", function () {\r",
									"    pm.expect(incomingRuleResult.cfg).to.be.eql(targetRuleResult.cfg);\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.result does not exist\", function () {\r",
									"    pm.expect(incomingRuleResult).to.not.have.property('result');\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.subRuleRef matches target rule result\", function () {\r",
									"    pm.expect(incomingRuleResult.subRuleRef).to.be.eql(targetRuleResult.subRuleRef);\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.reason is omitted\", function () {\r",
									"    pm.expect(incomingRuleResult.reason).to.be.eql(undefined);\r",
									"});\r",
									"\r",
									"pm.test(\"ruleResult.desc is omitted\", function () {\r",
									"    pm.expect(incomingRuleResult.desc).to.be.eql(undefined);\r",
									"});\r",
									"\r",
									"pm.test(`Processing time: ${(prcgTm/1000000).toFixed(3)} milliseconds`, function () {\r",
									"    pm.expect(prcgTm).to.be.greaterThan(0);\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"utils.setPm(pm); // set the utils _pm to the pre-request script pm to access the utils functions\r",
									"\r",
									"// Set up the rule identity\r",
									"\r",
									"const rule = '901';\r",
									"const ruleVer = '1.0.0'\r",
									"const configVer = '1.0.0'\r",
									"const ruleId = `${rule}@${ruleVer}`;\r",
									"\r",
									"console.log(`Rule: ${ruleId}@${configVer}\r",
									"======================`);\r",
									"\r",
									"// Set up the transaction history ecosystem\r",
									"\r",
									"let timeOffset = 0;\r",
									"\r",
									"utils.createNewTransactionSet(\r",
									"    /* First set time */ null,                          // null defaults 0\r",
									"    /* Currency */ null,                                // null defaults 'XTS' - test currency'\r",
									"    /* Amount */ 1000,                                  // null defaults random up to 1000.00\r",
									"    /* Description */ null,                             // null defaults 'Generic payment description'\r",
									"    /* Status */ 'ACCC',                                // null defaults 'ACCC' (successful)\r",
									"    /* Debtor Age */ null,                              // null defaults 25\r",
									"    /* Transaction Type */ null,                        // null defaults 'TRANSFER'\r",
									"    /* Latitude */ null,                                // null defaults -3.1609\r",
									"    /* Longitude */ null                                // null defaults 38.3588\r",
									"    );\r",
									"\r",
									"let dataCache = JSON.parse(pm.globals.get('dataCache'));\r",
									"\r",
									"timeOffset = utils.timeframe('hours') * 4\r",
									"utils.createMoreTransactionSets(\r",
									"    /* Number of sets = */ 2,                           // null defaults 1\r",
									"    /* Debtor ID */ dataCache.dbtrId,                   // null defaults random UUID\r",
									"    /* Debtor Account ID */ dataCache.dbtrAcctId,       // null defaults random UUID\r",
									"    /* Creditor ID */ null,                             // null defaults random UUID\r",
									"    /* Creditor Account ID */ null,                     // null defaults random UUID\r",
									"    /* First set time */ timeOffset,                    // null defaults 0\r",
									"    /* Time between sets */ null,                       // null defaults timestampEpoch/NumberOfSets\r",
									"    /* Currency */ null,                                // null defaults 'XTS' - test currency\r",
									"    /* Amount */ null,                                  // null defaults random up to 1000.00\r",
									"    /* Description */ null,                             // null defaults random UUID\r",
									"    /* Status */ 'ACSC',                                // null defaults 'ACCC' (successful)\r",
									"    /* Debtor Age */ null,                              // null defaults 25\r",
									"    /* Transaction Type */ null,                        // null defaults 'TRANSFER'\r",
									"    /* Latitude */ null,                                // null defaults -3.1609\r",
									"    /* Longitude */ null                                // null defaults 38.3588\r",
									"    );\r",
									"\r",
									"timeOffset = (utils.timeframe('days') * 1) + (utils.timeframe('hours') * 1);\r",
									"utils.createMoreTransactionSets(\r",
									"    /* Number of sets = */ 1,                           // null defaults 1\r",
									"    /* Debtor ID */ dataCache.dbtrId,                   // null defaults random UUID\r",
									"    /* Debtor Account ID */ dataCache.dbtrAcctId,       // null defaults random UUID\r",
									"    /* Creditor ID */ null,                             // null defaults random UUID\r",
									"    /* Creditor Account ID */ null,                     // null defaults random UUID\r",
									"    /* First set time */ -timeOffset,                   // null defaults 0\r",
									"    /* Time between sets */ null,                       // null defaults timestampEpoch/NumberOfSets\r",
									"    /* Currency */ null,                                // null defaults 'XTS' - test currency\r",
									"    /* Amount */ null,                                  // null defaults random up to 1000.00\r",
									"    /* Description */ null,                             // null defaults random UUID\r",
									"    /* Status */ 'ACSC',                                // null defaults 'ACCC' (successful)\r",
									"    /* Debtor Age */ null,                              // null defaults 25\r",
									"    /* Transaction Type */ null,                        // null defaults 'TRANSFER'\r",
									"    /* Latitude */ null,                                // null defaults -3.1609\r",
									"    /* Longitude */ null                                // null defaults 38.3588\r",
									"    );\r",
									"\r",
									"// ## Set up body variables\r",
									"\r",
									"pm.variables.set('messageBody', utils.getRuleBody(ruleId, configVer, JSON.parse(pm.globals.get('pacs002')), JSON.parse(pm.globals.get('dataCache'))));"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{{messageBody}}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{natsUrl}}/{{path-rule-901-rel-1-0-0}}",
							"host": [
								"{{natsUrl}}"
							],
							"path": [
								"{{path-rule-901-rel-1-0-0}}"
							]
						}
					},
					"response": []
				}
			],
			"description": "## Number of outgoing transactions - debtor\n\nThis rule determines how many transactions the debtor has performed from their account in the last day.",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"const uuid = require('uuid');",
					"const lodash = require('lodash');",
					"const debtorAgentId = \"fsp001\";",
					"const creditorAgentId = \"fsp002\";",
					"const debtorIdType = \"TAZAMA_EID\";",
					"const debtorAccountType = \"MSISDN\";",
					"const creditorIdType = \"TAZAMA_EID\";",
					"const creditorAccountType = \"MSISDN\";",
					"",
					"prep = {",
					"",
					"    /**",
					"     * Constructs a pain.001.001.11 message for initiating a customer credit transfer.",
					"     *",
					"     * @param {string} messageIdPain001 - Unique identifier for the message.",
					"     * @param {string} timestampPain001 - Timestamp of message creation.",
					"     * @param {string} debtorDoB - Date of birth of the debtor.",
					"     * @param {string} debtorId - Identifier for the debtor.",
					"     * @param {string} debtorAccountId - Account identifier for the debtor.",
					"     * @param {string} endToEndId - Unique end-to-end transaction identifier.",
					"     * @param {string} transactionPurpose - Purpose of the transaction.",
					"     * @param {string} currency - Currency code for the transaction amount.",
					"     * @param {number} amount - Transaction amount.",
					"     * @param {string} creditorId - Identifier for the creditor.",
					"     * @param {string} creditorAccountId - Account identifier for the creditor.",
					"     * @param {string} transactionDescription - Description of the transaction.",
					"     * @param {string} transactionLat - Latitude coordinate of the transaction location.",
					"     * @param {string} transactionLong - Longitude coordinate of the transaction location.",
					"     * ",
					"     * @returns {object} A pain.001.001.11 message object for customer credit transfer initiation.",
					"     */",
					"",
					"    prepPain001Msg: function (messageIdPain001, timestampPain001, debtorDoB, debtorId, debtorIdType, debtorAccountId, debtorAccountIdType, endToEndId, transactionPurpose, currency, amount, creditorId, creditorIdType, creditorAccountId, creditorAccountIdType, transactionDescription, transactionLat, transactionLong) {",
					"        return {",
					"            \"CstmrCdtTrfInitn\": {",
					"                \"GrpHdr\": {",
					"                    \"MsgId\": `${messageIdPain001}`,",
					"                    \"CreDtTm\": `${timestampPain001}`,",
					"                    \"NbOfTxs\": 1,",
					"                    \"InitgPty\": {",
					"                        \"Nm\": \"April Blake Grant\",",
					"                        \"Id\": {",
					"                            \"PrvtId\": {",
					"                                \"DtAndPlcOfBirth\": {",
					"                                    \"BirthDt\": \"1968-02-01\",",
					"                                    \"CityOfBirth\": \"Unknown\",",
					"                                    \"CtryOfBirth\": \"ZZ\"",
					"                                },",
					"                                \"Othr\": [{",
					"                                    \"Id\": \"+27730975224\",",
					"                                    \"SchmeNm\": {",
					"                                        \"Prtry\": `${debtorAccountIdType}`",
					"                                    }",
					"                                }]",
					"                            }",
					"                        },",
					"                        \"CtctDtls\": {",
					"                            \"MobNb\": \"+27-730975224\"",
					"                        }",
					"                    }",
					"                },",
					"                \"PmtInf\": {",
					"                    \"PmtInfId\": \"5ab4fc7355de4ef8a75b78b00a681ed2\",",
					"                    \"PmtMtd\": \"TRA\",",
					"                    \"ReqdAdvcTp\": {",
					"                        \"DbtAdvc\": {",
					"                            \"Cd\": \"ADWD\",",
					"                            \"Prtry\": \"Advice with transaction details\"",
					"                        }",
					"                    },",
					"                    \"ReqdExctnDt\": {",
					"                        \"Dt\": \"2023-06-02\",",
					"                        \"DtTm\": \"2023-06-02T07:50:57.000Z\"",
					"                    },",
					"                    \"Dbtr\": {",
					"                        \"Nm\": \"April Blake Grant\",",
					"                        \"Id\": {",
					"                            \"PrvtId\": {",
					"                                \"DtAndPlcOfBirth\": {",
					"                                    \"BirthDt\": `${debtorDoB}`,",
					"                                    \"CityOfBirth\": \"Unknown\",",
					"                                    \"CtryOfBirth\": \"ZZ\"",
					"                                },",
					"                                \"Othr\": [{",
					"                                    \"Id\": `${debtorId}`,",
					"                                    \"SchmeNm\": {",
					"                                        \"Prtry\": `${debtorIdType}`",
					"                                    }",
					"                                }]",
					"                            }",
					"                        },",
					"                        \"CtctDtls\": {",
					"                            \"MobNb\": \"+27-730975224\"",
					"                        }",
					"                    },",
					"                    \"DbtrAcct\": {",
					"                        \"Id\": {",
					"                            \"Othr\": [{",
					"                                \"Id\": `${debtorAccountId}`,",
					"                                \"SchmeNm\": {",
					"                                    \"Prtry\": `${debtorAccountIdType}`",
					"                                }",
					"                            }]",
					"                        },",
					"                        \"Nm\": \"April Grant\"",
					"                    },",
					"                    \"DbtrAgt\": {",
					"                        \"FinInstnId\": {",
					"                            \"ClrSysMmbId\": {",
					"                                \"MmbId\": `${debtorAgentId}`",
					"                            }",
					"                        }",
					"                    },",
					"                    \"CdtTrfTxInf\": {",
					"                        \"PmtId\": {",
					"                            \"EndToEndId\": `${endToEndId}`",
					"                        },",
					"                        \"PmtTpInf\": {",
					"                            \"CtgyPurp\": {",
					"                                \"Prtry\": `${transactionPurpose}`",
					"                            }",
					"                        },",
					"                        \"Amt\": {",
					"                            \"InstdAmt\": {",
					"                                \"Amt\": {",
					"                                    \"Amt\": amount,",
					"                                    \"Ccy\": `${currency}`",
					"                                }",
					"                            },",
					"                            \"EqvtAmt\": {",
					"                                \"Amt\": {",
					"                                    \"Amt\": amount,",
					"                                    \"Ccy\": `${currency}`",
					"                                },",
					"                                \"CcyOfTrf\": `${currency}`",
					"                            }",
					"                        },",
					"                        \"ChrgBr\": \"DEBT\",",
					"                        \"CdtrAgt\": {",
					"                            \"FinInstnId\": {",
					"                                \"ClrSysMmbId\": {",
					"                                    \"MmbId\": `${creditorAgentId}`",
					"                                }",
					"                            }",
					"                        },",
					"                        \"Cdtr\": {",
					"                            \"Nm\": \"Felicia Easton Quill\",",
					"                            \"Id\": {",
					"                                \"PrvtId\": {",
					"                                    \"DtAndPlcOfBirth\": {",
					"                                        \"BirthDt\": \"1935-05-08\",",
					"                                        \"CityOfBirth\": \"Unknown\",",
					"                                        \"CtryOfBirth\": \"ZZ\"",
					"                                    },",
					"                                    \"Othr\": [{",
					"                                        \"Id\": `${creditorId}`,",
					"                                        \"SchmeNm\": {",
					"                                            \"Prtry\": `${creditorIdType}`",
					"                                        }",
					"                                    }]",
					"                                }",
					"                            },",
					"                            \"CtctDtls\": {",
					"                                \"MobNb\": \"+27-707650428\"",
					"                            }",
					"                        },",
					"                        \"CdtrAcct\": {",
					"                            \"Id\": {",
					"                                \"Othr\": [{",
					"                                    \"Id\": `${creditorAccountId}`,",
					"                                    \"SchmeNm\": {",
					"                                        \"Prtry\": `${creditorAccountIdType}`",
					"                                    }",
					"                                }]",
					"                            },",
					"                            \"Nm\": \"Felicia Quill\"",
					"                        },",
					"                        \"Purp\": {",
					"                            \"Cd\": \"MP2P\"",
					"                        },",
					"                        \"RgltryRptg\": {",
					"                            \"Dtls\": {",
					"                                \"Tp\": \"BALANCE OF PAYMENTS\",",
					"                                \"Cd\": \"100\"",
					"                            }",
					"                        },",
					"                        \"RmtInf\": {",
					"                            \"Ustrd\": `${transactionDescription}`",
					"                        },",
					"                        \"SplmtryData\": {",
					"                            \"Envlp\": {",
					"                                \"Doc\": {",
					"                                    \"Dbtr\": {",
					"                                        \"FrstNm\": \"April\",",
					"                                        \"MddlNm\": \"Blake\",",
					"                                        \"LastNm\": \"Grant\",",
					"                                        \"MrchntClssfctnCd\": \"BLANK\"",
					"                                    },",
					"                                    \"Cdtr\": {",
					"                                        \"FrstNm\": \"Felicia\",",
					"                                        \"MddlNm\": \"Easton\",",
					"                                        \"LastNm\": \"Quill\",",
					"                                        \"MrchntClssfctnCd\": \"BLANK\"",
					"                                    },",
					"                                    \"DbtrFinSvcsPrvdrFees\": {",
					"                                        \"Ccy\": `${currency}`,",
					"                                        \"Amt\": 0.00",
					"                                    },",
					"                                    \"Xprtn\": \"2021-11-30T10:38:56.000Z\"",
					"                                }",
					"                            }",
					"                        }",
					"                    }",
					"                },",
					"                \"SplmtryData\": {",
					"                    \"Envlp\": {",
					"                        \"Doc\": {",
					"                            \"InitgPty\": {",
					"                                \"InitrTp\": \"CONSUMER\",",
					"                                \"Glctn\": {",
					"                                    \"Lat\": `${transactionLat}`,",
					"                                    \"Long\": `${transactionLong}`",
					"                                }",
					"                            }",
					"                        }",
					"                    }",
					"                }",
					"            }",
					"        }",
					"    },",
					"",
					"    /**",
					"     * Constructs a pain.013.001.09 message for initiating a creditor payment activation request.",
					"     *",
					"     * @param {string} messageIdPain013 - Unique identifier for the message.",
					"     * @param {string} timestampPain013 - Timestamp of message creation.",
					"     * @param {string} debtorDoB - Date of birth of the debtor.",
					"     * @param {string} debtorId - Identifier for the debtor.",
					"     * @param {string} debtorAccountId - Account identifier for the debtor.",
					"     * @param {string} endToEndId - Unique end-to-end transaction identifier.",
					"     * @param {string} currency - Currency code for the transaction amount.",
					"     * @param {number} amount - Transaction amount.",
					"     * @param {string} creditorId - Identifier for the creditor.",
					"     * @param {string} creditorAccountId - Account identifier for the creditor.",
					"     * @param {string} transactionLat - Latitude coordinate of the transaction location.",
					"     * @param {string} transactionLong - Longitude coordinate of the transaction location.",
					"     * ",
					"     * @returns {object} A pain.013.001.09 message object for creditor payment activation request.",
					"     */",
					"",
					"    prepPain013Msg: function (messageIdPain013, timestampPain013, debtorDoB, debtorId, debtorIdType, debtorAccountId, debtorAccountIdType, endToEndId, currency, amount, creditorId, creditorIdType, creditorAccountId, creditorAccountIdType, transactionLat, transactionLong) {",
					"        return {",
					"            \"CdtrPmtActvtnReq\": {",
					"                \"GrpHdr\": {",
					"                    \"MsgId\": `${messageIdPain013}`,",
					"                    \"CreDtTm\": `${timestampPain013}`,",
					"                    \"NbOfTxs\": 1,",
					"                    \"InitgPty\": {",
					"                        \"Nm\": \"April Blake Grant\",",
					"                        \"Id\": {",
					"                            \"PrvtId\": {",
					"                                \"DtAndPlcOfBirth\": {",
					"                                    \"BirthDt\": \"1968-02-01\",",
					"                                    \"CityOfBirth\": \"Unknown\",",
					"                                    \"CtryOfBirth\": \"ZZ\"",
					"                                },",
					"                                \"Othr\": [{",
					"                                    \"Id\": \"+27730975224\",",
					"                                    \"SchmeNm\": {",
					"                                        \"Prtry\": `${debtorAccountIdType}`",
					"                                    }",
					"                                }]",
					"                            }",
					"                        },",
					"                        \"CtctDtls\": {",
					"                            \"MobNb\": \"+27-730975224\"",
					"                        }",
					"                    }",
					"                },",
					"                \"PmtInf\": {",
					"                    \"PmtInfId\": \"5ab4fc7355de4ef8a75b78b00a681ed2\",",
					"                    \"PmtMtd\": \"TRA\",",
					"                    \"ReqdAdvcTp\": {",
					"                        \"DbtAdvc\": {",
					"                            \"Cd\": \"ADWD\",",
					"                            \"Prtry\": \"Advice with transaction details\"",
					"                        }",
					"                    },",
					"                    \"ReqdExctnDt\": {",
					"                        \"DtTm\": \"2023-06-02T07:51:48.000Z\"",
					"                    },",
					"                    \"XpryDt\": {",
					"                        \"DtTm\": \"2021-11-30T10:38:56.000Z\"",
					"                    },",
					"                    \"Dbtr\": {",
					"                        \"Nm\": \"April Blake Grant\",",
					"                        \"Id\": {",
					"                            \"PrvtId\": {",
					"                                \"DtAndPlcOfBirth\": {",
					"                                    \"BirthDt\": `${debtorDoB}`,",
					"                                    \"CityOfBirth\": \"Unknown\",",
					"                                    \"CtryOfBirth\": \"ZZ\"",
					"                                },",
					"                                \"Othr\": [{",
					"                                    \"Id\": `${debtorId}`,",
					"                                    \"SchmeNm\": {",
					"                                        \"Prtry\": `${debtorIdType}`",
					"                                    }",
					"                                }]",
					"                            }",
					"                        },",
					"                        \"CtctDtls\": {",
					"                            \"MobNb\": \"+27-730975224\"",
					"                        }",
					"                    },",
					"                    \"DbtrAcct\": {",
					"                        \"Id\": {",
					"                            \"Othr\": [{",
					"                                \"Id\": `${debtorAccountId}`,",
					"                                \"SchmeNm\": {",
					"                                    \"Prtry\": `${debtorAccountIdType}`",
					"                                }",
					"                            }]",
					"                        },",
					"                        \"Nm\": \"April Grant\"",
					"                    },",
					"                    \"DbtrAgt\": {",
					"                        \"FinInstnId\": {",
					"                            \"ClrSysMmbId\": {",
					"                                \"MmbId\": `${debtorAgentId}`",
					"                            }",
					"                        }",
					"                    },",
					"                    \"CdtTrfTxInf\": {",
					"                        \"PmtId\": {",
					"                            \"EndToEndId\": `${endToEndId}`",
					"                        },",
					"                        \"PmtTpInf\": {",
					"                            \"CtgyPurp\": {",
					"                                \"Prtry\": \"TRANSFER BLANK\"",
					"                            }",
					"                        },",
					"                        \"Amt\": {",
					"                            \"InstdAmt\": {",
					"                                \"Amt\": {",
					"                                    \"Amt\": amount,",
					"                                    \"Ccy\": `${currency}`",
					"                                }",
					"                            },",
					"                            \"EqvtAmt\": {",
					"                                \"Amt\": {",
					"                                    \"Amt\": amount,",
					"                                    \"Ccy\": `${currency}`",
					"                                },",
					"                                \"CcyOfTrf\": `${currency}`",
					"                            }",
					"                        },",
					"                        \"ChrgBr\": \"DEBT\",",
					"                        \"CdtrAgt\": {",
					"                            \"FinInstnId\": {",
					"                                \"ClrSysMmbId\": {",
					"                                    \"MmbId\": `${creditorAgentId}`",
					"                                }",
					"                            }",
					"                        },",
					"                        \"Cdtr\": {",
					"                            \"Nm\": \"Felicia Easton Quill\",",
					"                            \"Id\": {",
					"                                \"PrvtId\": {",
					"                                    \"DtAndPlcOfBirth\": {",
					"                                        \"BirthDt\": \"1935-05-08\",",
					"                                        \"CityOfBirth\": \"Unknown\",",
					"                                        \"CtryOfBirth\": \"ZZ\"",
					"                                    },",
					"                                    \"Othr\": [{",
					"                                        \"Id\": `${creditorId}`,",
					"                                        \"SchmeNm\": {",
					"                                            \"Prtry\": `${creditorIdType}`",
					"                                        }",
					"                                    }]",
					"                                }",
					"                            },",
					"                            \"CtctDtls\": {",
					"                                \"MobNb\": \"+27-707650428\"",
					"                            }",
					"                        },",
					"                        \"CdtrAcct\": {",
					"                            \"Id\": {",
					"                                \"Othr\": [{",
					"                                    \"Id\": `${creditorAccountId}`,",
					"                                    \"SchmeNm\": {",
					"                                        \"Prtry\": `${creditorAccountIdType}`",
					"                                    }",
					"                                }]",
					"                            },",
					"                            \"Nm\": \"Felicia Quill\"",
					"                        },",
					"                        \"Purp\": {",
					"                            \"Cd\": \"MP2P\"",
					"                        },",
					"                        \"RgltryRptg\": {",
					"                            \"Dtls\": {",
					"                                \"Tp\": \"BALANCE OF PAYMENTS\",",
					"                                \"Cd\": \"100\"",
					"                            }",
					"                        },",
					"                        \"SplmtryData\": {",
					"                            \"Envlp\": {",
					"                                \"Doc\": {",
					"                                    \"PyeeRcvAmt\": {",
					"                                        \"Amt\": {",
					"                                            \"Amt\": 0.00,",
					"                                            \"Ccy\": `${currency}`",
					"                                        }",
					"                                    },",
					"                                    \"PyeeFinSvcsPrvdrFee\": {",
					"                                        \"Amt\": {",
					"                                            \"Amt\": 0.00,",
					"                                            \"Ccy\": `${currency}`",
					"                                        }",
					"                                    },",
					"                                    \"PyeeFinSvcsPrvdrComssn\": {",
					"                                        \"Amt\": {",
					"                                            \"Amt\": 0.00,",
					"                                            \"Ccy\": `${currency}`",
					"                                        }",
					"                                    }",
					"                                }",
					"                            }",
					"                        }",
					"                    }",
					"                },",
					"                \"SplmtryData\": {",
					"                    \"Envlp\": {",
					"                        \"Doc\": {",
					"                            \"InitgPty\": {",
					"                                \"Glctn\": {",
					"                                    \"Lat\": `${transactionLat}`,",
					"                                    \"Long\": `${transactionLong}`",
					"                                }",
					"                            }",
					"                        }",
					"                    }",
					"                }",
					"            }",
					"        }",
					"    },",
					"",
					"    /**",
					"     * Constructs a pacs.008.001.10 message for initiating a financial institution to financial institution customer credit transfer.",
					"     *",
					"     * @param {string} messageIdPacs008 - Unique identifier for the message.",
					"     * @param {string} timestampPacs008 - Timestamp of message creation.",
					"     * @param {string} endToEndId - Unique end-to-end transaction identifier.",
					"     * @param {string} currency - Currency code for the transaction amount.",
					"     * @param {number} amount - Transaction amount.",
					"     * @param {string} debtorDoB - Date of birth of the debtor.",
					"     * @param {string} debtorId - Identifier for the debtor.",
					"     * @param {string} debtorAccountId - Account identifier for the debtor.",
					"     * @param {string} creditorId - Identifier for the creditor.",
					"     * @param {string} creditorAccountId - Account identifier for the creditor.",
					"     * @param {string} transactionPurpose - Purpose of the transaction.",
					"     * @param {string} transactionDescription - Description of the transaction.",
					"     * @param {string} transactionLat - Latitude coordinate of the transaction location.",
					"     * @param {string} transactionLong - Longitude coordinate of the transaction location.",
					"     * ",
					"     * @returns {object} A pacs.008.001.10 message object for financial institution to financial institution customer credit transfer.",
					"     */",
					"",
					"    prepPacs008Msg: function (messageIdPacs008, timestampPacs008, endToEndId, currency, amount, debtorDoB, debtorId, debtorIdType, debtorAccountId, debtorAccountIdType, creditorId, creditorIdType, creditorAccountId, creditorAccountIdType, transactionPurpose, transactionDescription, transactionLat, transactionLong) {",
					"",
					"        messageBody = {",
					"            \"TxTp\": \"pacs.008.001.10\",",
					"            \"FIToFICstmrCdtTrf\": {",
					"                \"GrpHdr\": {",
					"                    \"MsgId\": `${messageIdPacs008}`,",
					"                    \"CreDtTm\": `${timestampPacs008}`,",
					"                    \"NbOfTxs\": 1,",
					"                    \"SttlmInf\": {",
					"                        \"SttlmMtd\": \"CLRG\"",
					"                    }",
					"                },",
					"                \"CdtTrfTxInf\": {",
					"                    \"PmtId\": {",
					"                        \"InstrId\": \"5ab4fc7355de4ef8a75b78b00a681ed2\",",
					"                        \"EndToEndId\": `${endToEndId}`",
					"                    },",
					"                    \"IntrBkSttlmAmt\": {",
					"                        \"Amt\": {",
					"                            \"Amt\": amount,",
					"                            \"Ccy\": `${currency}`",
					"                        }",
					"                    },",
					"                    \"InstdAmt\": {",
					"                        \"Amt\": {",
					"                            \"Amt\": amount,",
					"                            \"Ccy\": `${currency}`",
					"                        }",
					"                    },",
					"                    \"ChrgBr\": \"DEBT\",",
					"                    \"ChrgsInf\": {",
					"                        \"Amt\": {",
					"                            \"Amt\": 0.00,",
					"                            \"Ccy\": `${currency}`",
					"                        },",
					"                        \"Agt\": {",
					"                            \"FinInstnId\": {",
					"                                \"ClrSysMmbId\": {",
					"                                    \"MmbId\": `${debtorAgentId}`",
					"                                }",
					"                            }",
					"                        }",
					"                    },",
					"                    \"InitgPty\": {",
					"                        \"Nm\": \"April Blake Grant\",",
					"                        \"Id\": {",
					"                            \"PrvtId\": {",
					"                                \"DtAndPlcOfBirth\": {",
					"                                    \"BirthDt\": \"1968-02-01\",",
					"                                    \"CityOfBirth\": \"Unknown\",",
					"                                    \"CtryOfBirth\": \"ZZ\"",
					"                                },",
					"                                \"Othr\": [{",
					"                                    \"Id\": \"+27730975224\",",
					"                                    \"SchmeNm\": {",
					"                                        \"Prtry\": `${debtorAccountIdType}`",
					"                                    }",
					"                                }]",
					"                            }",
					"                        },",
					"                        \"CtctDtls\": {",
					"                            \"MobNb\": \"+27-730975224\"",
					"                        }",
					"                    },",
					"                    \"Dbtr\": {",
					"                        \"Nm\": \"April Blake Grant\",",
					"                        \"Id\": {",
					"                            \"PrvtId\": {",
					"                                \"DtAndPlcOfBirth\": {",
					"                                    \"BirthDt\": `${debtorDoB}`,",
					"                                    \"CityOfBirth\": \"Unknown\",",
					"                                    \"CtryOfBirth\": \"ZZ\"",
					"                                },",
					"                                \"Othr\": [{",
					"                                    \"Id\": `${debtorId}`,",
					"                                    \"SchmeNm\": {",
					"                                        \"Prtry\": `${debtorIdType}`",
					"                                    }",
					"                                }]",
					"                            }",
					"                        },",
					"                        \"CtctDtls\": {",
					"                            \"MobNb\": \"+27-730975224\"",
					"                        }",
					"                    },",
					"                    \"DbtrAcct\": {",
					"                        \"Id\": {",
					"                            \"Othr\": [{",
					"                                \"Id\": `${debtorAccountId}`,",
					"                                \"SchmeNm\": {",
					"                                    \"Prtry\": `${debtorAccountIdType}`",
					"                                }",
					"                            }]",
					"                        },",
					"                        \"Nm\": \"April Grant\"",
					"                    },",
					"                    \"DbtrAgt\": {",
					"                        \"FinInstnId\": {",
					"                            \"ClrSysMmbId\": {",
					"                                \"MmbId\": `${debtorAgentId}`",
					"                            }",
					"                        }",
					"                    },",
					"                    \"CdtrAgt\": {",
					"                        \"FinInstnId\": {",
					"                            \"ClrSysMmbId\": {",
					"                                \"MmbId\": `${creditorAgentId}`",
					"                            }",
					"                        }",
					"                    },",
					"                    \"Cdtr\": {",
					"                        \"Nm\": \"Felicia Easton Quill\",",
					"                        \"Id\": {",
					"                            \"PrvtId\": {",
					"                                \"DtAndPlcOfBirth\": {",
					"                                    \"BirthDt\": \"1935-05-08\",",
					"                                    \"CityOfBirth\": \"Unknown\",",
					"                                    \"CtryOfBirth\": \"ZZ\"",
					"                                },",
					"                                \"Othr\": [{",
					"                                    \"Id\": `${creditorId}`,",
					"                                    \"SchmeNm\": {",
					"                                        \"Prtry\": `${creditorIdType}`",
					"                                    }",
					"                                }]",
					"                            }",
					"                        },",
					"                        \"CtctDtls\": {",
					"                            \"MobNb\": \"+27-707650428\"",
					"                        }",
					"                    },",
					"                    \"CdtrAcct\": {",
					"                        \"Id\": {",
					"                            \"Othr\": [{",
					"                                \"Id\": `${creditorAccountId}`,",
					"                                \"SchmeNm\": {",
					"                                    \"Prtry\": `${creditorAccountIdType}`",
					"                                }",
					"                            }]",
					"                        },",
					"                        \"Nm\": \"Felicia Quill\"",
					"                    },",
					"                    \"Purp\": {",
					"                        \"Cd\": `${transactionPurpose}`",
					"                    }",
					"                },",
					"                \"RgltryRptg\": {",
					"                    \"Dtls\": {",
					"                        \"Tp\": \"BALANCE OF PAYMENTS\",",
					"                        \"Cd\": \"100\"",
					"                    }",
					"                },",
					"                \"RmtInf\": {",
					"                    \"Ustrd\": `${transactionDescription}`",
					"                },",
					"                \"SplmtryData\": {",
					"                    \"Envlp\": {",
					"                        \"Doc\": {",
					"                            \"Xprtn\": \"2021-11-30T10:38:56.000Z\",",
					"                            \"InitgPty\": {",
					"                                \"Glctn\":",
					"                                {",
					"                                    \"Lat\": `${transactionLat}`,",
					"                                    \"Long\": `${transactionLong}`",
					"                                }",
					"                            }",
					"                        }",
					"                    }",
					"                }",
					"            }",
					"        }",
					"",
					"        return messageBody;",
					"    },",
					"",
					"    /**",
					"     * Constructs a pacs.002.001.12 message for financial institution to financial institution payment status reporting.",
					"     *",
					"     * @param {string} messageIdPacs002 - Unique identifier for the message.",
					"     * @param {string} timestampPacs002 - Timestamp of message creation.",
					"     * @param {string} endToEndId - Unique end-to-end transaction identifier.",
					"     * @param {string} pacs002Sts - Transaction status.",
					"     * ",
					"     * @returns {object} A pacs.002.001.12 message object for financial institution to financial institution payment status reporting.",
					"     */",
					"",
					"    prepPacs002Msg: function (messageIdPacs002, timestampPacs002, endToEndId, pacs002Sts) {",
					"        return {",
					"            \"FIToFIPmtSts\": {",
					"                \"GrpHdr\": {",
					"                    \"MsgId\": `${messageIdPacs002}`,",
					"                    \"CreDtTm\": `${timestampPacs002}`",
					"                },",
					"                \"TxInfAndSts\": {",
					"                    \"OrgnlInstrId\": \"5ab4fc7355de4ef8a75b78b00a681ed2\",",
					"                    \"OrgnlEndToEndId\": `${endToEndId}`,",
					"                    \"TxSts\": `${pacs002Sts}`,",
					"                    \"ChrgsInf\": [",
					"                        {",
					"                            \"Amt\": {",
					"                                \"Amt\": 0.00,",
					"                                \"Ccy\": \"USD\"",
					"                            },",
					"                            \"Agt\": {",
					"                                \"FinInstnId\": {",
					"                                    \"ClrSysMmbId\": {",
					"                                        \"MmbId\": `${debtorAgentId}`",
					"                                    }",
					"                                }",
					"                            }",
					"                        },",
					"                        {",
					"                            \"Amt\": {",
					"                                \"Amt\": 0.00,",
					"                                \"Ccy\": \"USD\"",
					"                            },",
					"                            \"Agt\": {",
					"                                \"FinInstnId\": {",
					"                                    \"ClrSysMmbId\": {",
					"                                        \"MmbId\": `${debtorAgentId}`",
					"                                    }",
					"                                }",
					"                            }",
					"                        },",
					"                        {",
					"                            \"Amt\": {",
					"                                \"Amt\": 0.00,",
					"                                \"Ccy\": \"USD\"",
					"                            },",
					"                            \"Agt\": {",
					"                                \"FinInstnId\": {",
					"                                    \"ClrSysMmbId\": {",
					"                                        \"MmbId\": `${creditorAgentId}`",
					"                                    }",
					"                                }",
					"                            }",
					"                        }",
					"                    ],",
					"                    \"AccptncDtTm\": \"2023-06-02T07:52:31.000Z\",",
					"                    \"InstgAgt\": {",
					"                        \"FinInstnId\": {",
					"                            \"ClrSysMmbId\": {",
					"                                \"MmbId\": `${debtorAgentId}`",
					"                            }",
					"                        }",
					"                    },",
					"                    \"InstdAgt\": {",
					"                        \"FinInstnId\": {",
					"                            \"ClrSysMmbId\": {",
					"                                \"MmbId\": `${creditorAgentId}`",
					"                            }",
					"                        }",
					"                    }",
					"                }",
					"            }",
					"        }",
					"    },",
					"",
					"    /**",
					"     * Constructs an array of graph entities for a debtor and a creditor.",
					"     *",
					"     * @param {string} debtorId - Identifier for the debtor.",
					"     * @param {string} creditorId - Identifier for the creditor.",
					"     * @param {string} timestamp - Timestamp of entity creation.",
					"     * ",
					"     * @returns {Array} An array of graph entities, each containing an identifier and a creation timestamp.",
					"     */",
					"",
					"    prepGraphEntities: function (debtorId, creditorId, timestamp) {",
					"        return [{",
					"            \"_key\": `${debtorId}`,",
					"            \"Id\": `${debtorId}`,",
					"            \"CreDtTm\": `${timestamp}`",
					"        }, {",
					"            \"_key\": `${creditorId}`,",
					"            \"Id\": `${creditorId}`,",
					"            \"CreDtTm\": `${timestamp}`",
					"        }]",
					"    },",
					"",
					"    /**",
					"     * Constructs an array of graph relationships between account holders and their accounts.",
					"     *",
					"     * @param {string} entitiesPrefix - Prefix for entity identifiers in the graph.",
					"     * @param {string} accountsPrefix - Prefix for account identifiers in the graph.",
					"     * @param {string} debtorId - Identifier for the debtor.",
					"     * @param {string} debtorAccountId - Account identifier for the debtor.",
					"     * @param {string} creditorId - Identifier for the creditor.",
					"     * @param {string} creditorAccountId - Account identifier for the creditor.",
					"     * @param {string} timestamp - Timestamp of relationship creation.",
					"     * ",
					"     * @returns {Array} An array of graph relationships, each connecting an account holder to their account.",
					"     */",
					"",
					"    prepGraphAccountHolders: function (entitiesPrefix, accountsPrefix, debtorId, debtorAccountId, creditorId, creditorAccountId, timestamp) {",
					"        return [{",
					"            \"_key\": `${debtorId}` + `${debtorAccountId}`,",
					"            \"_from\": `${entitiesPrefix}` + `${debtorId}`,",
					"            \"_to\": `${accountsPrefix}` + `${debtorAccountId}`,",
					"            \"CreDtTm\": `${timestamp}`",
					"        },",
					"        {",
					"            \"_key\": `${creditorId}` + `${creditorAccountId}`,",
					"            \"_from\": `${entitiesPrefix}` + `${creditorId}`,",
					"            \"_to\": `${accountsPrefix}` + `${creditorAccountId}`,",
					"            \"CreDtTm\": `${timestamp}`",
					"        }]",
					"    },",
					"",
					"    /**",
					"     * Constructs an array of graph nodes for debtor and creditor accounts.",
					"     *",
					"     * @param {string} debtorAccountId - Account identifier for the debtor.",
					"     * @param {string} creditorAccountId - Account identifier for the creditor.",
					"     * ",
					"     * @returns {Array} An array of graph nodes, each representing an account with a unique identifier.",
					"     */",
					"",
					"    prepGraphAccounts: function (debtorAccountId, creditorAccountId) {",
					"        return [{",
					"            \"_key\": debtorAccountId,",
					"        }, {",
					"            \"_key\": creditorAccountId,",
					"        }]",
					"    },",
					"",
					"    /**",
					"     * Constructs an array of graph transactions between debtor and creditor accounts, including various transaction types.",
					"     *",
					"     * @param {string} accountsPrefix - Prefix for account identifiers in the graph.",
					"     * @param {string} debtorAccountId - Account identifier for the debtor.",
					"     * @param {string} creditorAccountId - Account identifier for the creditor.",
					"     * @param {string} currency - Currency code for the transaction amount.",
					"     * @param {number} amount - Transaction amount.",
					"     * @param {string} endToEndId - Unique end-to-end transaction identifier.",
					"     * @param {string} timestampPacs008 - Timestamp of pacs.008.001.10 message creation.",
					"     * @param {string} messageIdPacs008 - Unique identifier for the pacs.008.001.10 message.",
					"     * @param {string} timestampPacs002 - Timestamp of pacs.002.001.12 message creation.",
					"     * @param {string} messageIdPacs002 - Unique identifier for the pacs.002.001.12 message.",
					"     * @param {string} pacs002Sts - Transaction status for pacs.002.001.12 message.",
					"     * @param {string} timestampPain001 - Timestamp of pain.001.001.11 message creation.",
					"     * @param {string} messageIdPain001 - Unique identifier for the pain.001.001.11 message.",
					"     * @param {string} timestampPain013 - Timestamp of pain.013.001.09 message creation.",
					"     * @param {string} messageIdPain013 - Unique identifier for the pain.013.001.09 message.",
					"     * ",
					"     * @returns {Array} An array of graph transactions, each representing a transaction between debtor and creditor accounts.",
					"     */",
					"",
					"    prepGraphTransactions: function (accountsPrefix, debtorAccountId, creditorAccountId, currency, amount, endToEndId, timestampPacs008, messageIdPacs008, timestampPacs002, messageIdPacs002, pacs002Sts, timestampPain001, messageIdPain001, timestampPain013, messageIdPain013) {",
					"",
					"        var transactions = [];",
					"",
					"        if (typeof timestampPain001 !== \"undefined\") {",
					"            transactions.push({",
					"                \"_from\": `${accountsPrefix}` + `${debtorAccountId}`,",
					"                \"_to\": `${accountsPrefix}` + `${creditorAccountId}`,",
					"                \"TxTp\": \"pain.001.001.11\",",
					"                \"CreDtTm\": `${timestampPain001}`,",
					"                \"Amt\": amount,",
					"                \"Ccy\": `${currency}`,",
					"                \"PmtInfId\": `${messageIdPain001}`,",
					"                \"EndToEndId\": `${endToEndId}`",
					"            });",
					"            transactions.push({",
					"                \"_from\": `${accountsPrefix}` + `${creditorAccountId}`,",
					"                \"_to\": `${accountsPrefix}` + `${debtorAccountId}`,",
					"                \"TxTp\": \"pain.013.001.09\",",
					"                \"CreDtTm\": `${timestampPain013}`,",
					"                \"Amt\": amount,",
					"                \"Ccy\": `${currency}`,",
					"                \"PmtInfId\": `${messageIdPain013}`,",
					"                \"EndToEndId\": `${endToEndId}`",
					"            });",
					"        }",
					"",
					"        transactions.push({",
					"            \"_from\": `${accountsPrefix}` + `${debtorAccountId}`,",
					"            \"_to\": `${accountsPrefix}` + `${creditorAccountId}`,",
					"            \"TxTp\": \"pacs.008.001.10\",",
					"            \"CreDtTm\": `${timestampPacs008}`,",
					"            \"Amt\": amount,",
					"            \"Ccy\": `${currency}`,",
					"            \"PmtInfId\": `${messageIdPacs008}`,",
					"            \"EndToEndId\": `${endToEndId}`",
					"        });",
					"",
					"        if (typeof timestampPacs002 !== \"undefined\") {",
					"            transactions.push({",
					"                \"_from\": `${accountsPrefix}` + `${creditorAccountId}`,",
					"                \"_to\": `${accountsPrefix}` + `${debtorAccountId}`,",
					"                \"TxTp\": \"pacs.002.001.12\",",
					"                \"TxSts\": `${pacs002Sts}`,",
					"                \"CreDtTm\": `${timestampPacs002}`,",
					"                \"PmtInfId\": `${messageIdPacs002}`,",
					"                \"EndToEndId\": `${endToEndId}`",
					"            });",
					"        }",
					"",
					"        return transactions",
					"    }",
					"}",
					"",
					"config = {",
					"",
					"    /**",
					"    * Asynchronously deletes a specific rule configuration from the database.",
					"    *",
					"    * @param {string} ruleId - Mandatory. The identifier of the rule whose configuration is to be deleted.",
					"    * @param {string} ruleConfigVersion - Mandatory. The version of the rule configuration to be deleted.",
					"    */",
					"",
					"    deleteRuleConfig: async function (ruleId, ruleConfigVersion) {",
					"",
					"        const queryString = `FOR cfg IN configuration",
					"      FILTER cfg.id == '${ruleId}'",
					"      AND cfg.cfg == '${ruleConfigVersion}'",
					"      REMOVE cfg._key IN configuration`;",
					"",
					"        const configPostRequest = {",
					"            url: `${_pm.environment.get('arangoUrl')}/_db/${_pm.environment.get('db_config_all')}/_api/cursor`,",
					"            method: 'POST',",
					"            header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"            body: {",
					"                mode: 'raw',",
					"                raw: JSON.stringify({",
					"                    query: queryString",
					"                })",
					"            }",
					"        };",
					"",
					"        await _pm.sendRequest(configPostRequest, (error, response) => {",
					"            console.log(error ? error : response.json());",
					"        });",
					"    },",
					"",
					"    /**",
					"     * Asynchronously creates a new rule configuration in the database.",
					"     *",
					"     * @param {object} ruleConfig - Mandatory. The configuration object for the rule to be created.",
					"     */",
					"",
					"",
					"    createRuleConfig: async function (ruleConfig) {",
					"",
					"        const configPostRequest = {",
					"            url: `${_pm.environment.get('arangoUrl')}/_db/${_pm.environment.get('db_config_all')}/_api/document/${_pm.environment.get('db_config_rules')}?overwrite=true`,",
					"            method: 'POST',",
					"            header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"            body: {",
					"                mode: 'raw',",
					"                raw: JSON.stringify(ruleConfig)",
					"            },",
					"        };",
					"",
					"        await _pm.sendRequest(configPostRequest, (error, response) => {",
					"            console.log(error ? error : response.json());",
					"        });",
					"    },",
					"",
					"    /**",
					"     * Asynchronously recreates a rule configuration by removing the existing configuration and creating a new one.",
					"     *",
					"     * @param {string} ruleId - Mandatory. The identifier of the rule whose configuration is to be recreated.",
					"     * @param {string} ruleConfigVersion - Mandatory. The version of the rule configuration.",
					"     * @param {object} ruleConfig - Mandatory. The new configuration object for the rule.",
					"     */",
					"",
					"    recreateRuleConfig: async function (ruleId, ruleConfigVersion, ruleConfig) {",
					"",
					"        const queryString = `FOR cfg IN configuration",
					"      FILTER cfg.id == '${ruleId}'",
					"      AND cfg.cfg == '${ruleConfigVersion}'",
					"      REMOVE cfg._key IN configuration`;",
					"",
					"        const configPostRequest = {",
					"            url: `${_pm.environment.get('arangoUrl')}/_db/${_pm.environment.get('db_config_all')}/_api/cursor`,",
					"            method: 'POST',",
					"            header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"            body: {",
					"                mode: 'raw',",
					"                raw: JSON.stringify({",
					"                    query: queryString",
					"                })",
					"            }",
					"        };",
					"",
					"        await _pm.sendRequest(configPostRequest, (error, response) => {",
					"            console.log(error ? error : response.json());",
					"            utils.createRuleConfig(ruleConfig);",
					"        });",
					"    }",
					"}",
					"",
					"utils = {",
					"    // https://community.postman.com/t/how-to-reuse-function-in-2022/39077/4",
					"    setPm: function (scriptPm) {",
					"        try {",
					"            if (!scriptPm) {",
					"                throw new Error(\"The pm object is not provided.\");",
					"            }",
					"            _pm = scriptPm;",
					"            console.log(\"pm object successfully set.\");",
					"        } catch (error) {",
					"            console.error(\"Failed to set pm object:\", error.message);",
					"        }",
					"    },",
					"",
					"    /**",
					"     * Converts a time unit to its equivalent in milliseconds.",
					"     * ",
					"     * Example: `weekInMilliseconds = 7 * utils.timeframe('d');`",
					"     *",
					"     * @param {string} unit - The time unit to convert. Supported units are 'd'/'days', 'h'/'hours', 'm'/'minutes', and 's'/'seconds'.",
					"     * @returns {number} The number of milliseconds corresponding to the given time unit.",
					"     */",
					"",
					"    timeframe: function (unit) {",
					"        switch (unit) {",
					"            case 'd':",
					"            case 'days':",
					"                milliseconds = 86400000;",
					"                break;",
					"            case 'h':",
					"            case 'hours':",
					"                milliseconds = 3600000;",
					"                break;",
					"            case 'm':",
					"            case 'minutes':",
					"                milliseconds = 60000;",
					"                break;",
					"            case 's':",
					"            case 'seconds':",
					"                milliseconds = 1000;",
					"                break;",
					"            default: milliseconds = 0;",
					"        }",
					"        return milliseconds;",
					"    },",
					"",
					"    /**",
					"     * Generates a UUID (Universally Unique Identifier) in ISO format by removing hyphens from a standard UUID.",
					"     *",
					"     * @returns {string} A UUID in ISO format without hyphens.",
					"     */",
					"",
					"    createISOUUID: function () {",
					"        return uuid.v4().replace(/-/g, '');",
					"    },",
					"",
					"    /**",
					"     * Logs a structured message containing payment transaction details to the console.",
					"     * This function facilitates easy tracking and debugging of transaction data by displaying it in a structured JSON format.",
					"     *",
					"     * @param {Object} dataCache - An object containing all the necessary transaction data.",
					"     *   @param {string} data.dbtrId - Debtor's identifier.",
					"     *   @param {string} data.cdtrId - Creditor's identifier.",
					"     *   @param {string} data.dbtrAcctId - Debtor's account identifier.",
					"     *   @param {string} data.cdtrAcctId - Creditor's account identifier.",
					"     *   @param {string} data.creDtTm - Creation date and time of the transaction, formatted as ISO 8601.",
					"     *   @param {number} data.amt - Transaction amount.",
					"     *   @param {string} data.curr - Currency of the transaction amount.",
					"     *   @param {string} data.endToEndId - End-to-end identifier that uniquely references the transaction.",
					"     *",
					"     * @example",
					"     * logDataCache({",
					"     *   dbtrId: '123',",
					"     *   cdtrId: '456',",
					"     *   dbtrAcctId: '78910',",
					"     *   cdtrAcctId: '111213',",
					"     *   creDtTm: '2020-12-31T23:59:59',",
					"     *   amt: 100.00,",
					"     *   curr: 'USD',",
					"     *   endToEndId: 'E2E123456789'",
					"     * });",
					"     */",
					"",
					"    logDataCache: function (dataCache) {",
					"        console.log(JSON.stringify({ DataCache: dataCache }, null, 4));",
					"    },",
					"",
					"    /**",
					"     * Creates multiple new accounts for a given entity and updates the graph database with the new accounts and their relationships to the entity.",
					"     *",
					"     * @param {string} entityId - Mandatory. Identifier for the entity to which the accounts will be associated.",
					"     * @param {number|null|undefined} [numberOfAccounts=0] - The number of new accounts to create. Defaults to 0.",
					"     */",
					"",
					"    createMoreAccounts: function (entityId, numberOfAccounts) {",
					"",
					"        const arangoUrl = _pm.environment.get('arangoUrl');",
					"        const db_historygraph = _pm.environment.get('db_historygraph');",
					"        const db_coll_graph_accounts = _pm.environment.get('db_coll_graph_accounts');",
					"        const db_coll_graph_account_holders = _pm.environment.get('db_coll_graph_account_holders');",
					"        const accountsPrefix = 'accounts/';",
					"        const entitiesPrefix = 'entities/';",
					"",
					"        // Variables for test data parameterisation",
					"",
					"        // Essential defaults",
					"        numberOfAccounts = numberOfAccounts ? numberOfAccounts : 0;",
					"",
					"        let timestamp = new Date(new Date(Date.now())).toISOString();",
					"",
					"        const accountIds = [];",
					"        for (let step = 0; step < numberOfAccounts; step++) {",
					"            accountIds.push('acct_' + uuid.v4().replace(/-/g, ''));",
					"        }",
					"",
					"        const accounts = [];",
					"        for (let step = 0; step < numberOfAccounts; step++) {",
					"            accounts.push({ \"_key\": accountIds[step] })",
					"        }",
					"",
					"        const account_holders = [];",
					"        for (let step = 0; step < numberOfAccounts; step++) {",
					"            account_holders.push({",
					"                \"_key\": `${entityId}+${accountIds[step]}`,",
					"                \"_from\": `${entitiesPrefix}` + `${entityId}`,",
					"                \"_to\": `${accountsPrefix}` + `${accountIds[step]}`,",
					"                \"CreDtTm\": timestamp",
					"            });",
					"        }",
					"",
					"        postRequests = [{",
					"            url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_accounts}`,",
					"            method: 'POST',",
					"            header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"            body: {",
					"                mode: 'raw',",
					"                raw: JSON.stringify(accounts)",
					"            }",
					"        }, {",
					"            url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_account_holders}`,",
					"            method: 'POST',",
					"            header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"            body: {",
					"                mode: 'raw',",
					"                raw: JSON.stringify(account_holders)",
					"            }",
					"        }];",
					"",
					"        postRequests.forEach((postRequest) => {",
					"            _pm.sendRequest(postRequest, (error, response) => {",
					"                console.log(error ? error : response.json());",
					"            });",
					"        });",
					"    },",
					"",
					"    /**",
					"     * Creates a single new account for a given entity and updates the graph database with the new account and its relationship to the entity.",
					"     *",
					"     * @param {string} entityId - Mandatory. Identifier for the entity to which the account will be associated.",
					"     * @param {string} accountId - Mandatory. Identifier for the new account.",
					"     * @param {string|null|undefined} [timestamp] - Timestamp for the creation of the account. Defaults to the current timestamp.",
					"     */",
					"",
					"    createSingleAccount: function (entityId, accountId, timestamp) {",
					"",
					"        const arangoUrl = _pm.environment.get('arangoUrl');",
					"        const db_historygraph = _pm.environment.get('db_historygraph');",
					"        const db_coll_graph_accounts = _pm.environment.get('db_coll_graph_accounts');",
					"        const db_coll_graph_account_holders = _pm.environment.get('db_coll_graph_account_holders');",
					"        const accountsPrefix = 'accounts/';",
					"        const entitiesPrefix = 'entities/';",
					"",
					"        // Variables for test data parameterisation",
					"",
					"        // Essential defaults",
					"        const numberOfAccounts = 1;",
					"",
					"        timestamp = timestamp ? timestamp : new Date(new Date(Date.now())).toISOString();",
					"",
					"        const accountIds = [];",
					"        for (let step = 0; step < numberOfAccounts; step++) {",
					"            accountIds.push(accountId);",
					"        }",
					"",
					"        const accounts = [];",
					"        for (let step = 0; step < numberOfAccounts; step++) {",
					"            accounts.push({ \"_key\": accountIds[step] })",
					"        }",
					"",
					"        const account_holders = [];",
					"        for (let step = 0; step < numberOfAccounts; step++) {",
					"            account_holders.push({",
					"                \"_from\": `${entitiesPrefix}` + `${entityId}`,",
					"                \"_to\": `${accountsPrefix}` + `${accountIds[step]}`,",
					"                \"CreDtTm\": `${timestamp}`",
					"            });",
					"        }",
					"",
					"        postRequests = [{",
					"            url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_accounts}`,",
					"            method: 'POST',",
					"            header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"            body: {",
					"                mode: 'raw',",
					"                raw: JSON.stringify(accounts)",
					"            }",
					"        }, {",
					"            url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_account_holders}`,",
					"            method: 'POST',",
					"            header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"            body: {",
					"                mode: 'raw',",
					"                raw: JSON.stringify(account_holders)",
					"            }",
					"        }];",
					"",
					"        postRequests.forEach((postRequest) => {",
					"            _pm.sendRequest(postRequest, (error, response) => {",
					"                console.log(error ? error : response.json());",
					"            });",
					"        });",
					"    },",
					"",
					"    /**",
					"     * Creates a new entity in the graph database with the given entity identifier.",
					"     *",
					"     * @param {string} entityId - Mandatory. Identifier for the new entity.",
					"     */",
					"",
					"    createEntity: function (entityId) {",
					"        const arangoUrl = _pm.environment.get('arangoUrl');",
					"        const db_historygraph = _pm.environment.get('db_historygraph');",
					"        const db_coll_graph_entities = _pm.environment.get('db_coll_graph_entities');",
					"        const entitiesPrefix = 'entities/';",
					"",
					"        // Essential defaults",
					"        const timestamp = new Date(new Date(Date.now())).toISOString();",
					"",
					"        const entities = [{",
					"            \"_key\": entityId,",
					"            \"Id\": entityId,",
					"            \"CreDtTm\": timestamp",
					"        }];",
					"",
					"        postRequests = [{",
					"            url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_entities}`,",
					"            method: 'POST',",
					"            header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"            body: {",
					"                mode: 'raw',",
					"                raw: JSON.stringify(entities)",
					"            }",
					"        }];",
					"",
					"        postRequests.forEach((postRequest) => {",
					"            _pm.sendRequest(postRequest, (error, response) => {",
					"                console.log(error ? error : response.json());",
					"            });",
					"        });",
					"    },",
					"",
					"    /**",
					"     * Creates a new set of transactions for testing purposes, including all necessary data and database operations.",
					"     * The transaction set will include pain.001/013 messages if the environment variable activePain001 = true.",
					"     * The transaction set will contain a pacs.008 and a pacs.002 message.",
					"     * The messages in the set will be linked through the same EndToEndId.",
					"     * The function stashes created data in global variables can be retrieved with the `pm.globals.get()` method.",
					"     *",
					"     * @param {number|null|undefined} [timestampEpoch=0] - Epoch timestamp for adjusting transaction timestamps. Defaults to 0.",
					"     * @param {string|null|undefined} [currency='XTS'] - Currency code for the transaction amount. Defaults to 'XTS'.",
					"     * @param {number|null|undefined} [amount] - Transaction amount. Defaults to a random value between 10 and 1000.",
					"     * @param {string|null|undefined} [transactionDescription='Generic payment description'] - Description of the transaction. Defaults to 'Generic payment description'.",
					"     * @param {string|null|undefined} [pacs002Sts='ACCC'] - Transaction status for pacs.002.001.12 message. Defaults to 'ACCC' (a successful transaction).",
					"     * @param {number|null|undefined} [debtorAge=25] - Age of the debtor. Defaults to 25.",
					"     * @param {string|null|undefined} [transactionPurpose] - Purpose of the transaction. Defaults to 'TRANSFER' if pain.001/013 ingestion is enabled, otherwise 'MP2P'.",
					"     * @param {number|null|undefined} [transactionLat=-3.1609] - Latitude coordinate of the transaction location. Defaults to -3.1609.",
					"     * @param {number|null|undefined} [transactionLong=38.3588] - Longitude coordinate of the transaction location. Defaults to 38.3588.",
					"     */",
					"",
					"    createNewTransactionSet: function (timestampEpoch, currency, amount, transactionDescription, pacs002Sts, debtorAge, transactionPurpose, transactionLat, transactionLong) {",
					"",
					"        const activePain001 = JSON.parse(_pm.environment.get('activePain001'));",
					"        activePain001 ? console.log(\"pain.001/013 ingestion is enabled\") : console.log(\"pain.001/013 ingestion is disabled\");",
					"        const arangoUrl = _pm.environment.get('arangoUrl');",
					"        const db_messagehistory = _pm.environment.get('db_messagehistory');",
					"        const db_historygraph = _pm.environment.get('db_historygraph');",
					"        const db_coll_graph_transactions = _pm.environment.get('db_coll_graph_transactions');",
					"        const db_coll_graph_entities = _pm.environment.get('db_coll_graph_entities');",
					"        const db_coll_graph_accounts = _pm.environment.get('db_coll_graph_accounts');",
					"        const db_coll_graph_account_holders = _pm.environment.get('db_coll_graph_account_holders');",
					"",
					"        var db_coll_msg_transactionHistoryPain001;",
					"        var db_coll_msg_transactionHistoryPain013;",
					"        if (activePain001) {",
					"            db_coll_msg_transactionHistoryPain001 = _pm.environment.get('db_coll_msg_transactionHistoryPain001');",
					"            db_coll_msg_transactionHistoryPain013 = _pm.environment.get('db_coll_msg_transactionHistoryPain013');",
					"        }",
					"        const db_coll_msg_transactionHistoryPacs008 = _pm.environment.get('db_coll_msg_transactionHistoryPacs008');",
					"        const db_coll_msg_transactionHistoryPacs002 = _pm.environment.get('db_coll_msg_transactionHistoryPacs002');",
					"        const accountsPrefix = 'accounts/';",
					"        const entitiesPrefix = 'entities/';",
					"",
					"        // Variables for test data parameterisation",
					"",
					"        // Essential defaults",
					"        timestampEpoch = timestampEpoch ? timestampEpoch : 0;",
					"        currency = currency ? currency : 'XTS';",
					"        amount = amount ? amount : Math.round((Math.random() * (1000 - 10) + 10) * 100) / 100;",
					"        transactionDescription = transactionDescription ? transactionDescription : 'Generic payment description';",
					"        pacs002Sts = pacs002Sts ? pacs002Sts : 'ACCC';",
					"        debtorAge = debtorAge ? debtorAge : 25;",
					"        if (activePain001) {",
					"            transactionPurpose = transactionPurpose ? transactionPurpose : 'TRANSFER' // or 'WITHDRAWAL', or 'PAYMENT'",
					"        } else {",
					"            transactionPurpose = transactionPurpose ? transactionPurpose : 'MP2P' // or 'MP2B', or 'CASH'",
					"        }",
					"        transactionLat = transactionLat ? transactionLat : -3.1609",
					"        transactionLong = transactionLong ? transactionLong : 38.3588",
					"",
					"        // Defaults",
					"        const timestampInterval = 300000; // 300,000 milliseconds = 5 minutes",
					"        let debtorId = 'dbtr_' + uuid.v4().replace(/-/g, '');",
					"        let debtorAccountId = 'dbtrAcct_' + uuid.v4().replace(/-/g, '');",
					"        let creditorId = 'cdtr_' + uuid.v4().replace(/-/g, '');",
					"        let creditorAccountId = 'cdtrAcct_' + uuid.v4().replace(/-/g, '');",
					"        let debtorDoB = new Date(new Date().setDate(new Date().getDate() - (debtorAge * 366))).toISOString().substring(0, 10);",
					"        let timestampPacs008 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 1)).toISOString();",
					"        let timestampPacs002 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 0)).toISOString();",
					"        console.log(\"pacs.002 payload timestamp: \" + timestampPacs002);",
					"        let endToEndId = uuid.v4().replace(/-/g, '');",
					"        let messageIdPacs008 = uuid.v4().replace(/-/g, '');",
					"        let messageIdPacs002 = uuid.v4().replace(/-/g, '');",
					"",
					"        var timestampPain001;",
					"        var timestampPain013;",
					"        var messageIdPain001;",
					"        var messageIdPain013;",
					"        var pain001;",
					"        var pain013;",
					"        var baseCreDtTm;",
					"",
					"        if (activePain001) {",
					"            timestampPain001 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 3)).toISOString();",
					"            timestampPain013 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 2)).toISOString();",
					"            messageIdPain001 = uuid.v4().replace(/-/g, '');",
					"            messageIdPain013 = uuid.v4().replace(/-/g, '');",
					"            pain001 = [prep.prepPain001Msg(messageIdPain001, timestampPain001, debtorDoB, debtorId, debtorIdType, debtorAccountId, debtorAccountType, endToEndId, transactionPurpose, currency, amount, creditorId, creditorIdType, creditorAccountId, creditAccountType, transactionDescription, transactionLat, transactionLong)];",
					"",
					"            pain013 = [prep.prepPain013Msg(messageIdPain013, timestampPain013, debtorDoB, debtorId, debtorIdType, debtorAccountId, debtorAccountType, endToEndId, currency, amount, creditorId, creditorIdType, creditorAccountId, creditorAccountType, transactionLat, transactionLong)];",
					"            baseCreDtTm = timestampPain001;",
					"        } else {",
					"            baseCreDtTm = timestampPacs008;",
					"        }",
					"",
					"        const pacs008 = [prep.prepPacs008Msg(messageIdPacs008, timestampPacs008, endToEndId, currency, amount, debtorDoB, debtorId, debtorIdType, debtorAccountId, debtorAccountType, creditorId, creditorIdType, creditorAccountId, creditorAccountType, transactionPurpose, transactionDescription, transactionLat, transactionLong)];",
					"",
					"        const pacs002 = [prep.prepPacs002Msg(messageIdPacs002, timestampPacs002, endToEndId, pacs002Sts)];",
					"",
					"        const pacs002TriggerPayload = pacs002;",
					"",
					"        var debtorKey = debtorId + debtorIdType;",
					"        var debtorAccountKey = debtorAccountId + debtorAccountType + debtorAgentId;",
					"        var creditorKey = creditorId + creditorIdType;",
					"        var creditorAccountKey = creditorAccountId + debtorAccountType + creditorAgentId;",
					"",
					"        const dataCache = [{",
					"            \"dbtrId\": `${debtorKey}`,",
					"            \"cdtrId\": `${creditorKey}`,",
					"            \"dbtrAcctId\": `${debtorAccountKey}`,",
					"            \"cdtrAcctId\": `${creditorAccountKey}`,",
					"            \"creDtTm\": `${baseCreDtTm}`,",
					"            \"amt\": {",
					"                \"amt\": amount,",
					"                \"ccy\": `${currency}`",
					"            }",
					"        }];",
					"",
					"        const accounts = prep.prepGraphAccounts(debtorAccountKey, creditorAccountKey);",
					"",
					"        var postRequests = [];",
					"        var account_holders = [];",
					"        var entities = [];",
					"        var transactions = [];",
					"",
					"        if (activePain001) {",
					"            entities = prep.prepGraphEntities(debtorKey, creditorKey, timestampPain001);",
					"            account_holders = prep.prepGraphAccountHolders(entitiesPrefix, accountsPrefix, debtorKey, debtorAccountKey, creditorKey, creditorAccountKey, timestampPain001);",
					"            transactions = prep.prepGraphTransactions(accountsPrefix, debtorAccountKey, creditorAccountKey, currency, amount, endToEndId, timestampPacs008, messageIdPacs008, timestampPacs002, messageIdPacs002, pacs002Sts, timestampPain001, messageIdPain001, timestampPain013, messageIdPain013);",
					"",
					"            postRequests = [{",
					"                url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPain001}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(pain001)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPain013}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(pain013)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPacs008}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(pacs008)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPacs002}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(pacs002)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_accounts}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(accounts)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_entities}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(entities)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_transactions}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(transactions)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_account_holders}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(account_holders)",
					"                }",
					"            }];",
					"        } else {",
					"            entities = prep.prepGraphEntities(debtorKey, creditorKey, timestampPacs008);",
					"            account_holders = prep.prepGraphAccountHolders(entitiesPrefix, accountsPrefix, debtorKey, debtorAccountKey, creditorKey, creditorAccountKey, timestampPacs008);",
					"            transactions = prep.prepGraphTransactions(accountsPrefix, debtorAccountKey, creditorAccountKey, currency, amount, endToEndId, timestampPacs008, messageIdPacs008, timestampPacs002, messageIdPacs002, pacs002Sts);",
					"",
					"            postRequests = [{",
					"                url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPacs008}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(pacs008)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPacs002}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(pacs002)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_accounts}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(accounts)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_entities}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(entities)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_transactions}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(transactions)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_account_holders}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(account_holders)",
					"                }",
					"            }];",
					"            console.log(postRequests);",
					"        }",
					"",
					"        postRequests.forEach((postRequest) => {",
					"            _pm.sendRequest(postRequest, (error, response) => {",
					"                console.log(error ? error : response.json());",
					"            });",
					"        });",
					"",
					"        console.log('pacs.002 trigger payload: ' + JSON.stringify(pacs002TriggerPayload[0]));",
					"",
					"        _pm.globals.set(\"pacs002\", JSON.stringify(pacs002TriggerPayload[0]));",
					"        _pm.globals.set(\"dataCache\", JSON.stringify(dataCache[0]));",
					"        _pm.globals.set('debtorId', debtorId);",
					"        _pm.globals.set('debtorAccountId', debtorAccountId);",
					"        _pm.globals.set('debtorDoB', debtorDoB);",
					"        _pm.globals.set('creditorId', creditorId);",
					"        _pm.globals.set('creditorAccountId', creditorAccountId);",
					"        _pm.globals.set('timestampPacs008', timestampPacs008);",
					"        _pm.globals.set('timestampPacs002', timestampPacs002);",
					"        _pm.globals.set('endToEndId', endToEndId);",
					"        _pm.globals.set('pacs002Sts', pacs002Sts);",
					"        _pm.globals.set('currency', currency);",
					"        _pm.globals.set('amount', amount);",
					"        _pm.globals.set('transactionDescription', transactionDescription);",
					"        _pm.globals.set('transactionPurpose', transactionPurpose);",
					"        _pm.globals.set('transactionLat', transactionLat);",
					"        _pm.globals.set('transactionLong', transactionLong);",
					"        _pm.globals.set('messageIdPacs008', messageIdPacs008);",
					"        _pm.globals.set('messageIdPacs002', messageIdPacs002);",
					"        _pm.globals.set('baseTimestamp', timestampPacs008);",
					"        _pm.globals.set('debtorKey', debtorKey);",
					"        _pm.globals.set('debtorAccountKey', debtorAccountKey);",
					"        _pm.globals.set('creditorKey', creditorKey);",
					"        _pm.globals.set('creditorAccountKey', creditorAccountKey);",
					"        if (activePain001) {",
					"            _pm.globals.set('timestampPain001', timestampPain001);",
					"            _pm.globals.set('timestampPain013', timestampPain013);",
					"            _pm.globals.set('messageIdPain001', messageIdPain001);",
					"            _pm.globals.set('messageIdPain013', messageIdPain013);",
					"            _pm.globals.set('baseTimestamp', timestampPain001);",
					"        }",
					"",
					"        this.logDataCache(dataCache[0]);",
					"",
					"    },",
					"",
					"    /**",
					"     * Creates a new set of transactions for testing purposes, excluding pacs.002.001.12 messages, and includes all necessary data and database operations.",
					"     * The transaction set will include pain.001/013 messages if the environment variable activePain001 = true.",
					"     * The transaction set will contain a pacs.008 message.",
					"     * The messages in the set will be linked through the same EndToEndId.",
					"     * The function stashes created data in global variables can be retrieved with the `pm.globals.get()` method.",
					"     *",
					"     * @param {number|null|undefined} [timestampEpoch=0] - Epoch timestamp for adjusting transaction timestamps. Defaults to 0.",
					"     * @param {string|null|undefined} [currency='XTS'] - Currency code for the transaction amount. Defaults to 'XTS'.",
					"     * @param {number|null|undefined} [amount] - Transaction amount. Defaults to a random value between 10 and 1000.",
					"     * @param {string|null|undefined} [transactionDescription='Generic payment description'] - Description of the transaction. Defaults to 'Generic payment description'.",
					"     * @param {string|null|undefined} [pacs002Sts='ACCC'] - Transaction status for pacs.002.001.12 message. Defaults to 'ACCC'.",
					"     * @param {number|null|undefined} [debtorAge=25] - Age of the debtor. Defaults to 25.",
					"     * @param {string|null|undefined} [transactionPurpose] - Purpose of the transaction. Defaults to 'TRANSFER' if pain.001/013 ingestion is enabled, otherwise 'MP2P'.",
					"     * @param {number|null|undefined} [transactionLat=-3.1609] - Latitude coordinate of the transaction location. Defaults to -3.1609.",
					"     * @param {number|null|undefined} [transactionLong=38.3588] - Longitude coordinate of the transaction location. Defaults to 38.3588.",
					"     */",
					"",
					"    createNewTransactionSetWithoutPacs002: function (timestampEpoch, currency, amount, transactionDescription, pacs002Sts, debtorAge, transactionPurpose, transactionLat, transactionLong) {",
					"",
					"        const activePain001 = JSON.parse(_pm.environment.get('activePain001'));",
					"        activePain001 ? console.log(\"pain.001/013 ingestion is enabled\") : console.log(\"pain.001/013 ingestion is disabled\");",
					"        const arangoUrl = _pm.environment.get('arangoUrl');",
					"        const db_messagehistory = _pm.environment.get('db_messagehistory');",
					"        const db_historygraph = _pm.environment.get('db_historygraph');",
					"        const db_coll_graph_transactions = _pm.environment.get('db_coll_graph_transactions');",
					"        const db_coll_graph_entities = _pm.environment.get('db_coll_graph_entities');",
					"        const db_coll_graph_accounts = _pm.environment.get('db_coll_graph_accounts');",
					"        const db_coll_graph_account_holders = _pm.environment.get('db_coll_graph_account_holders');",
					"        const db_coll_msg_transactionHistoryPacs008 = _pm.environment.get('db_coll_msg_transactionHistoryPacs008');",
					"        const db_coll_msg_transactionHistoryPacs002 = _pm.environment.get('db_coll_msg_transactionHistoryPacs002');",
					"        const accountsPrefix = 'accounts/';",
					"        const entitiesPrefix = 'entities/';",
					"",
					"        // Variables for test data parameterisation",
					"",
					"        // Essential defaults",
					"        timestampEpoch = timestampEpoch ? timestampEpoch : 0;",
					"        currency = currency ? currency : 'XTS';",
					"        amount = amount ? amount : Math.round((Math.random() * (1000 - 10) + 10) * 100) / 100;",
					"        transactionDescription = transactionDescription ? transactionDescription : 'Generic payment description';",
					"        pacs002Sts = pacs002Sts ? pacs002Sts : 'ACCC';",
					"        debtorAge = debtorAge ? debtorAge : 25;",
					"        if (activePain001) {",
					"            transactionPurpose = transactionPurpose ? transactionPurpose : 'TRANSFER' // or 'WITHDRAWAL', or 'PAYMENT'",
					"        } else {",
					"            transactionPurpose = transactionPurpose ? transactionPurpose : 'MP2P' // or 'MP2B', or 'CASH'",
					"        }",
					"        transactionLat = transactionLat ? transactionLat : -3.1609",
					"        transactionLong = transactionLong ? transactionLong : 38.3588",
					"",
					"        // Defaults",
					"        const timestampInterval = 300000; // 300,000 milliseconds = 5 minutes",
					"        let debtorId = 'dbtr_' + uuid.v4().replace(/-/g, '');",
					"        let debtorAccountId = 'dbtrAcct_' + uuid.v4().replace(/-/g, '');",
					"        let creditorId = 'cdtr_' + uuid.v4().replace(/-/g, '');",
					"        let creditorAccountId = 'cdtrAcct_' + uuid.v4().replace(/-/g, '');",
					"        let debtorDoB = new Date(new Date().setDate(new Date().getDate() - (debtorAge * 366))).toISOString().substring(0, 10);",
					"        let timestampPacs008 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 1)).toISOString();",
					"        let timestampPacs002 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 0)).toISOString();",
					"        console.log(\"pacs.002 payload timestamp: \" + timestampPacs002);",
					"        let endToEndId = uuid.v4().replace(/-/g, '');",
					"        let messageIdPacs008 = uuid.v4().replace(/-/g, '');",
					"        let messageIdPacs002 = uuid.v4().replace(/-/g, '');",
					"",
					"        var timestampPain001;",
					"        var timestampPain013;",
					"        var messageIdPain001;",
					"        var messageIdPain013;",
					"",
					"        var db_coll_msg_transactionHistoryPain001;",
					"        var db_coll_msg_transactionHistoryPain013;",
					"",
					"        var pain001;",
					"        var pain013;",
					"        var baseCreDtTm;",
					"",
					"        if (activePain001) {",
					"            db_coll_msg_transactionHistoryPain001 = _pm.environment.get('db_coll_msg_transactionHistoryPain001');",
					"            db_coll_msg_transactionHistoryPain013 = _pm.environment.get('db_coll_msg_transactionHistoryPain013');",
					"            timestampPain001 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 3)).toISOString();",
					"            timestampPain013 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 2)).toISOString();",
					"            messageIdPain001 = uuid.v4().replace(/-/g, '');",
					"            messageIdPain013 = uuid.v4().replace(/-/g, '');",
					"            pain001 = [prep.prepPain001Msg(messageIdPain001, timestampPain001, debtorDoB, debtorId, debtorIdType, debtorAccountId, debtorAccountType, endToEndId, transactionPurpose, currency, amount, creditorId, creditorIdType, creditorAccountId, creditAccountType, transactionDescription, transactionLat, transactionLong)];",
					"",
					"            pain013 = [prep.prepPain013Msg(messageIdPain013, timestampPain013, debtorDoB, debtorId, debtorIdType, debtorAccountId, debtorAccountType, endToEndId, currency, amount, creditorId, creditorIdType, creditorAccountId, creditorAccountType, transactionLat, transactionLong)];",
					"            baseCreDtTm = timestampPain001;",
					"        } else {",
					"            baseCreDtTm = timestampPacs008;",
					"        }",
					"",
					"        const pacs008 = [prep.prepPacs008Msg(messageIdPacs008, timestampPacs008, endToEndId, currency, amount, debtorDoB, debtorId, debtorIdType, debtorAccountId, debtorAccountType, creditorId, creditorIdType, creditorAccountId, creditorAccountType, transactionPurpose, transactionDescription, transactionLat, transactionLong)];",
					"",
					"        const pacs002 = [prep.prepPacs002Msg(messageIdPacs002, timestampPacs002, endToEndId, pacs002Sts)];",
					"",
					"        const pacs002TriggerPayload = pacs002;",
					"",
					"        const accounts = prep.prepGraphAccounts(debtorAccountKey, creditorAccountKey);",
					"",
					"        var postRequests = [];",
					"        var account_holders = [];",
					"        var entities = [];",
					"        var transactions = [];",
					"",
					"        var debtorKey = debtorId + debtorIdType;",
					"        var debtorAccountKey = debtorAccountId + debtorAccountType + debtorAgentId;",
					"        var creditorKey = creditorId + creditorIdType;",
					"        var creditorAccountKey = creditorAccountId + debtorAccountType + creditorAgentId;",
					"",
					"        const dataCache = [{",
					"            \"dbtrId\": `${debtorKey}`,",
					"            \"cdtrId\": `${creditorKey}`,",
					"            \"dbtrAcctId\": `${debtorAccountKey}`,",
					"            \"cdtrAcctId\": `${creditorAccountKey}`,",
					"            \"creDtTm\": `${baseCreDtTm}`,",
					"            \"amt\": {",
					"                \"amt\": amount,",
					"                \"ccy\": `${currency}`",
					"            }",
					"        }];",
					"",
					"        if (activePain001) {",
					"            entities = prep.prepGraphEntities(debtorKey, creditorKey, timestampPain001);",
					"            account_holders = prep.prepGraphAccountHolders(entitiesPrefix, accountsPrefix, debtorKey, debtorAccountKey, creditorKey, creditorAccountKey, timestampPain001);",
					"            transactions = prep.prepGraphTransactions(accountsPrefix, debtorAccountKey, creditorAccountKey, currency, amount, endToEndId, timestampPacs008, messageIdPacs008, undefined, undefined, undefined, timestampPain001, messageIdPain001, timestampPain013, messageIdPain013);",
					"",
					"            postRequests = [{",
					"                url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPain001}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(pain001)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPain013}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(pain013)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPacs008}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(pacs008)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_accounts}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(accounts)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_entities}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(entities)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_transactions}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(transactions)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_account_holders}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(account_holders)",
					"                }",
					"            }];",
					"        } else {",
					"            entities = prep.prepGraphEntities(debtorKey, creditorKey, timestampPacs008);",
					"            account_holders = prep.prepGraphAccountHolders(entitiesPrefix, accountsPrefix, debtorKey, debtorAccountKey, creditorKey, creditorAccountKey, timestampPacs008);",
					"            transactions = prep.prepGraphTransactions(accountsPrefix, debtorAccountKey, creditorAccountKey, currency, amount, endToEndId, timestampPacs008, messageIdPacs008);",
					"",
					"            postRequests = [{",
					"                url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPacs008}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(pacs008)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_accounts}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(accounts)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_entities}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(entities)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_transactions}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(transactions)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_account_holders}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(account_holders)",
					"                }",
					"            }];",
					"        }",
					"",
					"        postRequests.forEach((postRequest) => {",
					"            _pm.sendRequest(postRequest, (error, response) => {",
					"                console.log(error ? error : response.json());",
					"            });",
					"        });",
					"",
					"        console.log('pacs.002 trigger payload for Data Preparation: ' + JSON.stringify(pacs002TriggerPayload[0]));",
					"",
					"        _pm.globals.set(\"pacs002DataPrep\", JSON.stringify(pacs002TriggerPayload[0]));",
					"        _pm.globals.set(\"dataCache\", JSON.stringify(dataCache[0]));",
					"        _pm.globals.set('debtorId', debtorId);",
					"        _pm.globals.set('debtorAccountId', debtorAccountId);",
					"        _pm.globals.set('debtorDoB', debtorDoB);",
					"        _pm.globals.set('creditorId', creditorId);",
					"        _pm.globals.set('creditorAccountId', creditorAccountId);",
					"        _pm.globals.set('timestampPacs008', timestampPacs008);",
					"        _pm.globals.set('timestampPacs002', timestampPacs002);",
					"        _pm.globals.set('endToEndId', endToEndId);",
					"        _pm.globals.set('pacs002Sts', pacs002Sts);",
					"        _pm.globals.set('currency', currency);",
					"        _pm.globals.set('amount', amount);",
					"        _pm.globals.set('transactionDescription', transactionDescription);",
					"        _pm.globals.set('transactionPurpose', transactionPurpose);",
					"        _pm.globals.set('transactionLat', transactionLat);",
					"        _pm.globals.set('transactionLong', transactionLong);",
					"        _pm.globals.set('messageIdPacs008', messageIdPacs008);",
					"        _pm.globals.set('messageIdPacs002', messageIdPacs002);",
					"        _pm.globals.set('baseTimestamp', timestampPacs008);",
					"        _pm.globals.set('debtorKey', debtorKey);",
					"        _pm.globals.set('debtorAccountKey', debtorAccountKey);",
					"        _pm.globals.set('creditorKey', creditorKey);",
					"        _pm.globals.set('creditorAccountKey', creditorAccountKey);",
					"        if (activePain001) {",
					"            _pm.globals.set('timestampPain001', timestampPain001);",
					"            _pm.globals.set('timestampPain013', timestampPain013);",
					"            _pm.globals.set('messageIdPain001', messageIdPain001);",
					"            _pm.globals.set('messageIdPain013', messageIdPain013);",
					"            _pm.globals.set('baseTimestamp', timestampPain001);",
					"        }",
					"",
					"        this.logDataCache(dataCache[0]);",
					"",
					"    },",
					"",
					"    /**",
					"     * Creates multiple sets of transactions for testing purposes, each with its own unique identifiers and timestamps, and includes all necessary data and database operations.",
					"     * The transaction sets will include pain.001/013 messages if the environment variable activePain001 = true.",
					"     * The transaction set will contain a pacs.008 and a pacs.002 message.",
					"     * The messages in the set will be linked through the same EndToEndId.",
					"     * The function stashes created data in global variables can be retrieved with the `pm.globals.get()` method.",
					"     *",
					"     * @param {number|null|undefined} [numberOfSets=1] - The number of transaction sets to create. Defaults to 1.",
					"     * @param {string|null|undefined} [debtorIdRef=null] - Reference identifier for the debtor. If provided, this ID will be used for all transaction sets. Defaults to null, which means a new ID will be generated for each set.",
					"     * @param {string|null|undefined} [debtorAccountIdRef=null] - Reference account identifier for the debtor. If provided, this ID will be used for all transaction sets. Defaults to null, which means a new ID will be generated for each set.",
					"     * @param {string|null|undefined} [creditorIdRef=null] - Reference identifier for the creditor. If provided, this ID will be used for all transaction sets. Defaults to null, which means a new ID will be generated for each set.",
					"     * @param {string|null|undefined} [creditorAccountIdRef=null] - Reference account identifier for the creditor. If provided, this ID will be used for all transaction sets. Defaults to null, which means a new ID will be generated for each set.",
					"     * @param {number|null|undefined} [timestampEpoch=0] - Epoch timestamp for adjusting transaction timestamps. Defaults to 0.",
					"     * @param {number|null|undefined} [timestampIterationLeap] - The leap in milliseconds between each transaction set's timestamp. Defaults to the total epoch divided by the number of sets or 0 if only one set is created.",
					"     * @param {string|null|undefined} [currency='XTS'] - Currency code for the transaction amount. Defaults to 'XTS'.",
					"     * @param {number|null|undefined} [amountRef=null] - Reference amount for the transaction. If provided, this amount will be used for all transaction sets. Defaults to null, which means a random amount will be generated for each set.",
					"     * @param {string|null|undefined} [transactionDescriptionRef=null] - Reference description for the transaction. If provided, this description will be used for all transaction sets. Defaults to null, which means a random description will be generated for each set.",
					"     * @param {string|null|undefined} [pacs002Sts='ACCC'] - Transaction status for pacs.002.001.12 message. Defaults to 'ACCC' (a successul transaction).",
					"     * @param {number|null|undefined} [debtorAge=25] - Age of the debtor. Defaults to 25.",
					"     * @param {string|null|undefined} [transactionPurpose] - Purpose of the transaction. Defaults to 'TRANSFER' if pain.001/013 ingestion is enabled, otherwise 'MP2P'.",
					"     * @param {number|null|undefined} [transactionLat=-3.1609] - Latitude coordinate of the transaction location. Defaults to -3.1609.",
					"     * @param {number|null|undefined} [transactionLong=38.3588] - Longitude coordinate of the transaction location. Defaults to 38.3588.",
					"     */",
					"",
					"    createMoreTransactionSets: function (numberOfSets, debtorIdRef, debtorAccountIdRef, creditorIdRef, creditorAccountIdRef, timestampEpoch, timestampIterationLeap, currency, amountRef, transactionDescriptionRef, pacs002Sts, debtorAge, transactionPurpose, transactionLat, transactionLong) {",
					"",
					"        const activePain001 = JSON.parse(_pm.environment.get('activePain001'));",
					"        activePain001 ? console.log(\"pain.001/013 ingestion is enabled\") : console.log(\"pain.001/013 ingestion is disabled\");",
					"        const arangoUrl = _pm.environment.get('arangoUrl');",
					"        const db_messagehistory = _pm.environment.get('db_messagehistory');",
					"        const db_historygraph = _pm.environment.get('db_historygraph');",
					"        const db_coll_graph_transactions = _pm.environment.get('db_coll_graph_transactions');",
					"",
					"        var db_coll_msg_transactionHistoryPain001;",
					"        var db_coll_msg_transactionHistoryPain013;",
					"        if (activePain001) {",
					"            db_coll_msg_transactionHistoryPain001 = _pm.environment.get('db_coll_msg_transactionHistoryPain001');",
					"            db_coll_msg_transactionHistoryPain013 = _pm.environment.get('db_coll_msg_transactionHistoryPain013');",
					"        }",
					"        const db_coll_msg_transactionHistoryPacs008 = _pm.environment.get('db_coll_msg_transactionHistoryPacs008');",
					"        const db_coll_msg_transactionHistoryPacs002 = _pm.environment.get('db_coll_msg_transactionHistoryPacs002');",
					"        const accountsPrefix = 'accounts/';",
					"",
					"        // Variables for test data parameterisation",
					"",
					"        // Essential defaults",
					"        numberOfSets = numberOfSets ? numberOfSets : 1;",
					"        timestampEpoch = timestampEpoch ? timestampEpoch : 0;",
					"        currency = currency ? currency : 'XTS';",
					"        if (numberOfSets == 1) {",
					"            timestampIterationLeap = 0",
					"        } else {",
					"            timestampIterationLeap = timestampIterationLeap ? timestampIterationLeap : Math.trunc(timestampEpoch / numberOfSets)",
					"        }",
					"        pacs002Sts = pacs002Sts ? pacs002Sts : 'ACCC';",
					"        debtorAge = debtorAge ? debtorAge : 25;",
					"        if (activePain001) {",
					"            transactionPurpose = transactionPurpose ? transactionPurpose : 'TRANSFER' // or 'WITHDRAWAL', or 'PAYMENT'",
					"        } else {",
					"            transactionPurpose = transactionPurpose ? transactionPurpose : 'MP2P' // or 'MP2B', or 'CASH'",
					"        }",
					"        transactionLat = transactionLat ? transactionLat : -3.1609",
					"        transactionLong = transactionLong ? transactionLong : 38.3588",
					"",
					"        // Defaults",
					"        const timestampInterval = 300000; // 300,000 milliseconds = 5 minutes",
					"        let debtorDoB = new Date(new Date().setDate(new Date().getDate() - (debtorAge * 366))).toISOString().substring(0, 10);",
					"        timestampEpochStart = timestampEpoch;",
					"",
					"        for (let step = 0; step < numberOfSets; step++) {",
					"            // Match incoming parameter or randomise",
					"            let debtorId = debtorIdRef || 'dbtr_' + uuid.v4().replace(/-/g, '') + debtorIdType;",
					"            let debtorAccountId = debtorAccountIdRef || 'dbtrAcct_' + uuid.v4().replace(/-/g, '') + debtorAccountType + debtorAgentId;",
					"            let creditorId = creditorIdRef || 'cdtr_' + uuid.v4().replace(/-/g, '') + creditorIdType;",
					"            let creditorAccountId = creditorAccountIdRef || 'cdtrAcct_' + uuid.v4().replace(/-/g, '') + debtorAccountType + creditorAgentId;",
					"",
					"            var debtorKey = debtorId;",
					"            var debtorAccountKey = debtorAccountId;",
					"            var creditorKey = creditorId;",
					"            var creditorAccountKey = creditorAccountId;",
					"",
					"            let amount = amountRef || Math.round((Math.random() * (1000 - 10) + 10) * 100) / 100;",
					"            let transactionDescription = transactionDescriptionRef || uuid.v4().replace(/-/g, '');",
					"            let timestampPacs008 = new Date(new Date(Date.now() - timestampEpochStart + (timestampIterationLeap * step) - timestampInterval * 1)).toISOString();",
					"            let timestampPacs002 = new Date(new Date(Date.now() - timestampEpochStart + (timestampIterationLeap * step) - timestampInterval * 0)).toISOString();",
					"",
					"            if (!debtorIdRef) {",
					"                utils.createEntity(debtorId);",
					"            }",
					"            if (!creditorIdRef) {",
					"                utils.createEntity(creditorId);",
					"            }",
					"            if (!debtorAccountIdRef) {",
					"                utils.createSingleAccount(debtorKey, debtorAccountKey, timestampPacs008);",
					"            }",
					"            if (!creditorAccountIdRef) {",
					"                utils.createSingleAccount(creditorKey, creditorAccountKey, timestampPacs008);",
					"            }",
					"",
					"            let endToEndId = uuid.v4().replace(/-/g, '');",
					"            let messageIdPacs008 = uuid.v4().replace(/-/g, '');",
					"            let messageIdPacs002 = uuid.v4().replace(/-/g, '');",
					"",
					"            var timestampPain001;",
					"            var timestampPain013;",
					"            var messageIdPain001;",
					"            var messageIdPain013;",
					"",
					"            var pain001;",
					"            var pain013;",
					"",
					"            if (activePain001) {",
					"                timestampPain001 = new Date(new Date(Date.now() - timestampEpochStart + (timestampIterationLeap * step) - timestampInterval * 3)).toISOString();",
					"                timestampPain013 = new Date(new Date(Date.now() - timestampEpochStart + (timestampIterationLeap * step) - timestampInterval * 2)).toISOString();",
					"                messageIdPain001 = uuid.v4().replace(/-/g, '');",
					"                messageIdPain013 = uuid.v4().replace(/-/g, '');",
					"",
					"                pain001 = [prep.prepPain001Msg(messageIdPain001, timestampPain001, debtorDoB, debtorId, debtorIdType, debtorAccountId, debtorAccountType, endToEndId, transactionPurpose, currency, amount, creditorId, creditorIdType, creditorAccountId, creditAccountType, transactionDescription, transactionLat, transactionLong)];",
					"",
					"                pain013 = [prep.prepPain013Msg(messageIdPain013, timestampPain013, debtorDoB, debtorId, debtorIdType, debtorAccountId, debtorAccountType, endToEndId, currency, amount, creditorId, creditorIdType, creditorAccountId, creditorAccountType, transactionLat, transactionLong)];",
					"            }",
					"",
					"            const pacs008 = [prep.prepPacs008Msg(messageIdPacs008, timestampPacs008, endToEndId, currency, amount, debtorDoB, debtorId, debtorIdType, debtorAccountId, debtorAccountType, creditorId, creditorIdType, creditorAccountId, creditorAccountType, transactionPurpose, transactionDescription, transactionLat, transactionLong)];",
					"",
					"            const pacs002 = [prep.prepPacs002Msg(messageIdPacs002, timestampPacs002, endToEndId, pacs002Sts)];",
					"",
					"            var transactions = [];",
					"            var postRequests = [];",
					"",
					"            if (activePain001) {",
					"                transactions = prep.prepGraphTransactions(accountsPrefix, debtorAccountKey, creditorAccountKey, currency, amount, endToEndId, timestampPacs008, messageIdPacs008, timestampPacs002, messageIdPacs002, pacs002Sts, timestampPain001, messageIdPain001, timestampPain013, messageIdPain013);",
					"",
					"                postRequests = [{",
					"                    url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPain001}`,",
					"                    method: 'POST',",
					"                    header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                    body: {",
					"                        mode: 'raw',",
					"                        raw: JSON.stringify(pain001)",
					"                    }",
					"                }, {",
					"                    url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPain013}`,",
					"                    method: 'POST',",
					"                    header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                    body: {",
					"                        mode: 'raw',",
					"                        raw: JSON.stringify(pain013)",
					"                    }",
					"                }, {",
					"                    url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPacs008}`,",
					"                    method: 'POST',",
					"                    header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                    body: {",
					"                        mode: 'raw',",
					"                        raw: JSON.stringify(pacs008)",
					"                    }",
					"                }, {",
					"                    url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPacs002}`,",
					"                    method: 'POST',",
					"                    header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                    body: {",
					"                        mode: 'raw',",
					"                        raw: JSON.stringify(pacs002)",
					"                    }",
					"                }, {",
					"                    url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_transactions}`,",
					"                    method: 'POST',",
					"                    header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                    body: {",
					"                        mode: 'raw',",
					"                        raw: JSON.stringify(transactions)",
					"                    }",
					"                }];",
					"            } else {",
					"                let transactions = [{",
					"                    \"_from\": `${accountsPrefix}` + `${debtorAccountId}`,",
					"                    \"_to\": `${accountsPrefix}` + `${creditorAccountId}`,",
					"                    \"TxTp\": \"pacs.008.001.10\",",
					"                    \"CreDtTm\": `${timestampPacs008}`,",
					"                    \"Amt\": amount,",
					"                    \"Ccy\": \"USD\",",
					"                    \"PmtInfId\": `${messageIdPacs008}`,",
					"                    \"EndToEndId\": `${endToEndId}`",
					"                },",
					"                {",
					"                    \"_from\": `${accountsPrefix}` + `${creditorAccountId}`,",
					"                    \"_to\": `${accountsPrefix}` + `${debtorAccountId}`,",
					"                    \"TxTp\": \"pacs.002.001.12\",",
					"                    \"TxSts\": `${pacs002Sts}`,",
					"                    \"CreDtTm\": `${timestampPacs002}`,",
					"                    \"PmtInfId\": `${messageIdPacs002}`,",
					"                    \"EndToEndId\": `${endToEndId}`",
					"                }]",
					"",
					"                postRequests = [{",
					"                    url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPacs008}`,",
					"                    method: 'POST',",
					"                    header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                    body: {",
					"                        mode: 'raw',",
					"                        raw: JSON.stringify(pacs008)",
					"                    }",
					"                }, {",
					"                    url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPacs002}`,",
					"                    method: 'POST',",
					"                    header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                    body: {",
					"                        mode: 'raw',",
					"                        raw: JSON.stringify(pacs002)",
					"                    }",
					"                }, {",
					"                    url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_transactions}`,",
					"                    method: 'POST',",
					"                    header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                    body: {",
					"                        mode: 'raw',",
					"                        raw: JSON.stringify(transactions)",
					"                    }",
					"                }];",
					"            }",
					"",
					"            postRequests.forEach((postRequest) => {",
					"                _pm.sendRequest(postRequest, (error, response) => {",
					"                    console.log(error ? error : response.json());",
					"                });",
					"            });",
					"",
					"            if (activePain001) {",
					"                console.log(`Created transaction set ${step + 1}/${numberOfSets} from ${debtorAccountId} to ${creditorAccountId} from pain.001:${timestampPain001} to pacs.002:${timestampPacs002} with EndToEndId ${endToEndId}`);",
					"            } else {",
					"                console.log(`Created transaction set ${step + 1}/${numberOfSets} from ${debtorAccountId} to ${creditorAccountId} from pacs.008:${timestampPacs008} to pacs.002${timestampPacs002} with EndToEndId ${endToEndId}`);",
					"            }",
					"",
					"        }",
					"    },",
					"",
					"    /**",
					"     * Creates multiple sets of transactions for testing purposes, each with its own unique identifiers and timestamps, and includes all necessary data and database operations.",
					"     * This function allows more rapid transactions compared to the `createNewTransactionSet` or `createMoreTransactionSets` functions that separates transactions with a .",
					"     * The transaction sets will include pain.001/013 messages if the environment variable activePain001 = true.",
					"     * The transaction set will contain a pacs.008 and a pacs.002 message.",
					"     * The messages in the set will be linked through the same EndToEndId.",
					"     * The function stashes created data in global variables can be retrieved with the `pm.globals.get()` method.",
					"     *",
					"     * @param {number|null|undefined} [numberOfSets=1] - The number of transaction sets to create. Defaults to 1.",
					"     * @param {string|null|undefined} [debtorIdRef=null] - Reference identifier for the debtor. If provided, this ID will be used for all transaction sets. Defaults to null, which means a new ID will be generated for each set.",
					"     * @param {string|null|undefined} [debtorAccountIdRef=null] - Reference account identifier for the debtor. If provided, this ID will be used for all transaction sets. Defaults to null, which means a new ID will be generated for each set.",
					"     * @param {string|null|undefined} [creditorIdRef=null] - Reference identifier for the creditor. If provided, this ID will be used for all transaction sets. Defaults to null, which means a new ID will be generated for each set.",
					"     * @param {string|null|undefined} [creditorAccountIdRef=null] - Reference account identifier for the creditor. If provided, this ID will be used for all transaction sets. Defaults to null, which means a new ID will be generated for each set.",
					"     * @param {number|null|undefined} [timestampEpoch=0] - Epoch timestamp for adjusting transaction timestamps. Defaults to 0.",
					"     * @param {number|null|undefined} [timestampIterationLeap] - The leap in milliseconds between each transaction set's timestamp. Defaults to the total epoch divided by the number of sets or 0 if only one set is created.",
					"     * @param {number|null|undefined} [timestampInterval=300000] - Interval in milliseconds between different types of messages within a transaction set. Defaults to 300,000 milliseconds (5 minutes).",
					"     * @param {string|null|undefined} [currency='XTS'] - Currency code for the transaction amount. Defaults to 'XTS'.",
					"     * @param {number|null|undefined} [amountRef=null] - Reference amount for the transaction. If provided, this amount will be used for all transaction sets. Defaults to null, which means a random amount will be generated for each set.",
					"     * @param {string|null|undefined} [transactionDescriptionRef=null] - Reference description for the transaction. If provided, this description will be used for all transaction sets. Defaults to null, which means a random description will be generated for each set.",
					"     * @param {string|null|undefined} [pacs002Sts='ACCC'] - Transaction status for pacs.002.001.12 message. Defaults to 'ACCC' (a successful transaction).",
					"     * @param {number|null|undefined} [debtorAge=25] - Age of the debtor. Defaults to 25.",
					"     * @param {string|null|undefined} [transactionPurpose] - Purpose of the transaction. Defaults to 'TRANSFER' if pain.001/013 ingestion is enabled, otherwise 'MP2P'.",
					"     * @param {number|null|undefined} [transactionLat=-3.1609] - Latitude coordinate of the transaction location. Defaults to -3.1609.",
					"     * @param {number|null|undefined} [transactionLong=38.3588] - Longitude coordinate of the transaction location. Defaults to 38.3588.",
					"     */",
					"",
					"    createQuickerTransactionSets: function (numberOfSets, debtorIdRef, debtorAccountIdRef, creditorIdRef, creditorAccountIdRef, timestampEpoch, timestampIterationLeap, timestampInterval, currency, amountRef, transactionDescriptionRef, pacs002Sts, debtorAge, transactionPurpose, transactionLat, transactionLong) {",
					"",
					"        const activePain001 = JSON.parse(_pm.environment.get('activePain001'));",
					"        activePain001 ? console.log(\"pain.001/013 ingestion is enabled\") : console.log(\"pain.001/013 ingestion is disabled\");",
					"        const arangoUrl = _pm.environment.get('arangoUrl');",
					"        const db_messagehistory = _pm.environment.get('db_messagehistory');",
					"        const db_historygraph = _pm.environment.get('db_historygraph');",
					"        const db_coll_graph_transactions = _pm.environment.get('db_coll_graph_transactions');",
					"",
					"        var db_coll_msg_transactionHistoryPain001;",
					"        var db_coll_msg_transactionHistoryPain013;",
					"        if (activePain001) {",
					"            db_coll_msg_transactionHistoryPain001 = _pm.environment.get('db_coll_msg_transactionHistoryPain001');",
					"            db_coll_msg_transactionHistoryPain013 = _pm.environment.get('db_coll_msg_transactionHistoryPain013');",
					"        }",
					"        const db_coll_msg_transactionHistoryPacs008 = _pm.environment.get('db_coll_msg_transactionHistoryPacs008');",
					"        const db_coll_msg_transactionHistoryPacs002 = _pm.environment.get('db_coll_msg_transactionHistoryPacs002');",
					"        const accountsPrefix = 'accounts/';",
					"",
					"        // Variables for test data parameterisation",
					"",
					"        // Essential defaults",
					"        numberOfSets = numberOfSets ? numberOfSets : 1;",
					"        timestampEpoch = timestampEpoch ? timestampEpoch : 0;",
					"        currency = currency ? currency : 'XTS';",
					"        if (numberOfSets == 1) {",
					"            timestampIterationLeap = 0",
					"        } else {",
					"            timestampIterationLeap = timestampIterationLeap ? timestampIterationLeap : Math.trunc(timestampEpoch / numberOfSets)",
					"        }",
					"        timestampInterval = timestampInterval ? timestampInterval : 300000; // 300,000 milliseconds = 5 minutes",
					"        pacs002Sts = pacs002Sts ? pacs002Sts : 'ACCC';",
					"        debtorAge = debtorAge ? debtorAge : 25;",
					"        if (activePain001) {",
					"            transactionPurpose = transactionPurpose ? transactionPurpose : 'TRANSFER' // or 'WITHDRAWAL', or 'PAYMENT'",
					"        } else {",
					"            transactionPurpose = transactionPurpose ? transactionPurpose : 'MP2P' // or 'MP2B', or 'CASH'",
					"        }",
					"        transactionLat = transactionLat ? transactionLat : -3.1609",
					"        transactionLong = transactionLong ? transactionLong : 38.3588",
					"",
					"        // Defaults",
					"        let debtorDoB = new Date(new Date().setDate(new Date().getDate() - (debtorAge * 366))).toISOString().substring(0, 10);",
					"        timestampEpochStart = timestampEpoch;",
					"",
					"        for (let step = 0; step < numberOfSets; step++) {",
					"            // Match incoming parameter or randomise",
					"            let debtorId = debtorIdRef || 'dbtr_' + uuid.v4().replace(/-/g, '') + debtorIdType;",
					"            let debtorAccountId = debtorAccountIdRef || 'dbtrAcct_' + uuid.v4().replace(/-/g, '') + debtorAccountType + debtorAgentId;",
					"            let creditorId = creditorIdRef || 'cdtr_' + uuid.v4().replace(/-/g, '') + creditorIdType;",
					"            let creditorAccountId = creditorAccountIdRef || 'cdtrAcct_' + uuid.v4().replace(/-/g, '') + debtorAccountType + creditorAgentId;",
					"",
					"            var debtorKey = debtorId;",
					"            var debtorAccountKey = debtorAccountId;",
					"            var creditorKey = creditorId;",
					"            var creditorAccountKey = creditorAccountId;",
					"",
					"            let amount = amountRef || Math.round((Math.random() * (1000 - 10) + 10) * 100) / 100;",
					"            let transactionDescription = transactionDescriptionRef || uuid.v4().replace(/-/g, '');",
					"",
					"            let timestampPacs008 = new Date(new Date(Date.now() - timestampEpochStart + (timestampIterationLeap * step) - timestampInterval * 1)).toISOString();",
					"            let timestampPacs002 = new Date(new Date(Date.now() - timestampEpochStart + (timestampIterationLeap * step) - timestampInterval * 0)).toISOString();",
					"",
					"            if (!debtorIdRef) {",
					"                utils.createEntity(debtorId);",
					"            }",
					"            if (!creditorIdRef) {",
					"                utils.createEntity(creditorId);",
					"            }",
					"            if (!debtorAccountIdRef) {",
					"                utils.createSingleAccount(debtorKey, debtorAccountKey, timestampPacs008);",
					"            }",
					"            if (!creditorAccountIdRef) {",
					"                utils.createSingleAccount(creditorKey, creditorAccountKey, timestampPacs008);",
					"            }",
					"",
					"            let endToEndId = uuid.v4().replace(/-/g, '');",
					"            let messageIdPacs008 = uuid.v4().replace(/-/g, '');",
					"            let messageIdPacs002 = uuid.v4().replace(/-/g, '');",
					"",
					"            const pacs008 = [prep.prepPacs008Msg(messageIdPacs008, timestampPacs008, endToEndId, currency, amount, debtorDoB, debtorId, debtorIdType, debtorAccountId, debtorAccountType, creditorId, creditorIdType, creditorAccountId, creditorAccountType, transactionPurpose, transactionDescription, transactionLat, transactionLong)];",
					"",
					"            const pacs002 = [prep.prepPacs002Msg(messageIdPacs002, timestampPacs002, endToEndId, pacs002Sts)];",
					"",
					"            var timestampPain001;",
					"            var timestampPain013;",
					"            var messageIdPain001;",
					"            var messageIdPain013;",
					"",
					"            var pain001;",
					"            var pain013;",
					"",
					"            if (activePain001) {",
					"                timestampPain001 = new Date(new Date(Date.now() - timestampEpochStart + (timestampIterationLeap * step) - timestampInterval * 3)).toISOString();",
					"                timestampPain013 = new Date(new Date(Date.now() - timestampEpochStart + (timestampIterationLeap * step) - timestampInterval * 2)).toISOString();",
					"                messageIdPain001 = uuid.v4().replace(/-/g, '');",
					"                messageIdPain013 = uuid.v4().replace(/-/g, '');",
					"",
					"                pain001 = [prep.prepPain001Msg(messageIdPain001, timestampPain001, debtorDoB, debtorId, debtorIdType, debtorAccountId, debtorAccountType, endToEndId, transactionPurpose, currency, amount, creditorId, creditorIdType, creditorAccountId, creditAccountType, transactionDescription, transactionLat, transactionLong)];",
					"",
					"                pain013 = [prep.prepPain013Msg(messageIdPain013, timestampPain013, debtorDoB, debtorId, debtorIdType, debtorAccountId, debtorAccountType, endToEndId, currency, amount, creditorId, creditorIdType, creditorAccountId, creditorAccountType, transactionLat, transactionLong)];",
					"            }",
					"",
					"            var transactions = [];",
					"            var postRequests = [];",
					"",
					"            if (activePain001) {",
					"                transactions = prep.prepGraphTransactions(accountsPrefix, debtorAccountKey, creditorAccountKey, currency, amount, endToEndId, timestampPacs008, messageIdPacs008, timestampPacs002, messageIdPacs002, pacs002Sts, timestampPain001, messageIdPain001, timestampPain013, messageIdPain013);",
					"",
					"                postRequests = [{",
					"                    url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPain001}`,",
					"                    method: 'POST',",
					"                    header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                    body: {",
					"                        mode: 'raw',",
					"                        raw: JSON.stringify(pain001)",
					"                    }",
					"                }, {",
					"                    url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPain013}`,",
					"                    method: 'POST',",
					"                    header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                    body: {",
					"                        mode: 'raw',",
					"                        raw: JSON.stringify(pain013)",
					"                    }",
					"                }, {",
					"                    url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPacs008}`,",
					"                    method: 'POST',",
					"                    header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                    body: {",
					"                        mode: 'raw',",
					"                        raw: JSON.stringify(pacs008)",
					"                    }",
					"                }, {",
					"                    url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPacs002}`,",
					"                    method: 'POST',",
					"                    header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                    body: {",
					"                        mode: 'raw',",
					"                        raw: JSON.stringify(pacs002)",
					"                    }",
					"                }, {",
					"                    url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_transactions}`,",
					"                    method: 'POST',",
					"                    header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                    body: {",
					"                        mode: 'raw',",
					"                        raw: JSON.stringify(transactions)",
					"                    }",
					"                }];",
					"            } else {",
					"                transactions = prep.prepGraphTransactions(accountsPrefix, debtorAccountKey, creditorAccountKey, currency, amount, endToEndId, timestampPacs008, messageIdPacs008, timestampPacs002, messageIdPacs002, pacs002Sts);",
					"",
					"                postRequests = [{",
					"                    url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPacs008}`,",
					"                    method: 'POST',",
					"                    header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                    body: {",
					"                        mode: 'raw',",
					"                        raw: JSON.stringify(pacs008)",
					"                    }",
					"                }, {",
					"                    url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPacs002}`,",
					"                    method: 'POST',",
					"                    header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                    body: {",
					"                        mode: 'raw',",
					"                        raw: JSON.stringify(pacs002)",
					"                    }",
					"                }, {",
					"                    url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_transactions}`,",
					"                    method: 'POST',",
					"                    header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                    body: {",
					"                        mode: 'raw',",
					"                        raw: JSON.stringify(transactions)",
					"                    }",
					"                }];",
					"            }",
					"",
					"            postRequests.forEach((postRequest) => {",
					"                _pm.sendRequest(postRequest, (error, response) => {",
					"                    console.log(error ? error : response.json());",
					"                });",
					"            });",
					"",
					"            if (activePain001) {",
					"                console.log(`Created transaction set ${step + 1}/${numberOfSets} from ${debtorAccountId} to ${creditorAccountId} from pain.001:${timestampPain001} to pacs.002:${timestampPacs002} with EndToEndId ${endToEndId}`);",
					"            } else {",
					"                console.log(`Created transaction set ${step + 1}/${numberOfSets} from ${debtorAccountId} to ${creditorAccountId} from pacs.008:${timestampPacs008} to pacs.002${timestampPacs002} with EndToEndId ${endToEndId}`);",
					"            }",
					"",
					"        }",
					"    },",
					"",
					"    /**",
					"     * Creates a new set of transactions for testing purposes, including all necessary data, and stores it in memory so that the transactions can be submitted to the API in sequence as valid messages.",
					"     * The transaction sets will include pain.001/013 messages if the environment variable activePain001 = true.",
					"     * The transaction set will contain a pacs.008 and a pacs.002 message.",
					"     * The messages in the set will be linked through the same EndToEndId.",
					"     * The function stashes created data in global variables can be retrieved with the `pm.globals.get()` method.",
					"     *",
					"     * @param {number|null|undefined} [timestampEpoch=0] - Epoch timestamp for adjusting transaction timestamps. Defaults to 0.",
					"     * @param {string|null|undefined} [currency='XTS'] - Currency code for the transaction amount. Defaults to 'XTS'.",
					"     * @param {number|null|undefined} [amount] - Transaction amount. Defaults to a random value between 10 and 1000.",
					"     * @param {string|null|undefined} [transactionDescription='Generic payment description'] - Description of the transaction. Defaults to 'Generic payment description'.",
					"     * @param {string|null|undefined} [pacs002Sts='ACCC'] - Transaction status for pacs.002.001.12 message. Defaults to 'ACCC' (a successful transaction).",
					"     * @param {number|null|undefined} [debtorAge=25] - Age of the debtor. Defaults to 25.",
					"     * @param {string|null|undefined} [transactionPurpose] - Purpose of the transaction. Defaults to 'TRANSFER' if pain.001/013 ingestion is enabled, otherwise 'MP2P'.",
					"     * @param {number|null|undefined} [transactionLat=-3.1609] - Latitude coordinate of the transaction location. Defaults to -3.1609.",
					"     * @param {number|null|undefined} [transactionLong=38.3588] - Longitude coordinate of the transaction location. Defaults to 38.3588.",
					"     */",
					"",
					"    createNewTransactionSetInMemory: function (timestampEpoch, currency, amount, transactionDescription, pacs002Sts, debtorAge, transactionPurpose, transactionLat, transactionLong) {",
					"",
					"        // Variables for test data parameterisation",
					"        const activePain001 = JSON.parse(_pm.environment.get('activePain001'));",
					"        activePain001 ? console.log(\"pain.001/013 ingestion is enabled\") : console.log(\"pain.001/013 ingestion is disabled\");",
					"",
					"        // Essential defaults",
					"        timestampEpoch = timestampEpoch ? timestampEpoch : 0;",
					"        currency = currency ? currency : 'XTS';",
					"        amount = amount ? amount : Math.round((Math.random() * (1000 - 10) + 10) * 100) / 100;",
					"        transactionDescription = transactionDescription ? transactionDescription : 'Generic payment description';",
					"        pacs002Sts = pacs002Sts ? pacs002Sts : 'ACCC';",
					"        debtorAge = debtorAge ? debtorAge : 25;",
					"        if (activePain001) {",
					"            transactionPurpose = transactionPurpose ? transactionPurpose : 'TRANSFER' // or 'WITHDRAWAL', or 'PAYMENT'",
					"        } else {",
					"            transactionPurpose = transactionPurpose ? transactionPurpose : 'MP2P' // or 'MP2B', or 'CASH'",
					"        }",
					"        transactionLat = transactionLat ? transactionLat : -3.1609",
					"        transactionLong = transactionLong ? transactionLong : 38.3588",
					"",
					"        // Defaults",
					"        const timestampInterval = 300000; // 300,000 milliseconds = 5 minutes",
					"        let debtorId = uuid.v4().replace(/-/g, '');",
					"        let debtorAccountId = uuid.v4().replace(/-/g, '');",
					"        let creditorId = uuid.v4().replace(/-/g, '');",
					"        let creditorAccountId = uuid.v4().replace(/-/g, '');",
					"        let debtorDoB = new Date(new Date().setDate(new Date().getDate() - (debtorAge * 366))).toISOString().substring(0, 10);",
					"        let timestampPacs008 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 1)).toISOString();",
					"        let timestampPacs002 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 0)).toISOString();",
					"        console.log(\"pacs.002 payload timestamp: \" + timestampPacs002);",
					"        let endToEndId = uuid.v4().replace(/-/g, '');",
					"        let messageIdPacs008 = uuid.v4().replace(/-/g, '');",
					"        let messageIdPacs002 = uuid.v4().replace(/-/g, '');",
					"",
					"        var timestampPain001;",
					"        var timestampPain013;",
					"        var messageIdPain001;",
					"        var messageIdPain013;",
					"",
					"        var pain001;",
					"        var pain013;",
					"        var baseCreDtTm;",
					"",
					"        var debtorKey = debtorId + debtorIdType;",
					"        var debtorAccountKey = debtorAccountId + debtorAccountType + debtorAgentId;",
					"        var creditorKey = creditorId + creditorIdType;",
					"        var creditorAccountKey = creditorAccountId + debtorAccountType + creditorAgentId;",
					"",
					"        if (activePain001) {",
					"            timestampPain001 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 3)).toISOString();",
					"            timestampPain013 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 2)).toISOString();",
					"            messageIdPain001 = uuid.v4().replace(/-/g, '');",
					"            messageIdPain013 = uuid.v4().replace(/-/g, '');",
					"",
					"            pain001 = [prep.prepPain001Msg(messageIdPain001, timestampPain001, debtorDoB, debtorId, debtorIdType, debtorAccountId, debtorAccountType, endToEndId, transactionPurpose, currency, amount, creditorId, creditorIdType, creditorAccountId, creditAccountType, transactionDescription, transactionLat, transactionLong)];",
					"",
					"            pain013 = [prep.prepPain013Msg(messageIdPain013, timestampPain013, debtorDoB, debtorId, debtorIdType, debtorAccountId, debtorAccountType, endToEndId, currency, amount, creditorId, creditorIdType, creditorAccountId, creditorAccountType, transactionLat, transactionLong)];",
					"            baseCreDtTm = timestampPain001;",
					"        } else {",
					"            baseCreDtTm = timestampPacs008;",
					"        }",
					"",
					"        const pacs008 = [prep.prepPacs008Msg(messageIdPacs008, timestampPacs008, endToEndId, currency, amount, debtorDoB, debtorId, debtorIdType, debtorAccountId, debtorAccountType, creditorId, creditorIdType, creditorAccountId, creditorAccountType, transactionPurpose, transactionDescription, transactionLat, transactionLong)];",
					"        //let deleteTxTp = lodash.unset(pacs008[0],\"TxTp\");",
					"",
					"        const pacs002 = [prep.prepPacs002Msg(messageIdPacs002, timestampPacs002, endToEndId, pacs002Sts)];",
					"",
					"        const dataCache = [{",
					"            \"dbtrId\": `${debtorKey}`,",
					"            \"cdtrId\": `${creditorKey}`,",
					"            \"dbtrAcctId\": `${debtorAccountKey}`,",
					"            \"cdtrAcctId\": `${creditorAccountKey}`,",
					"            \"creDtTm\": `${baseCreDtTm}`,",
					"            \"amt\": {",
					"                \"amt\": amount,",
					"                \"ccy\": `${currency}`",
					"            }",
					"        }];",
					"",
					"        console.log('pacs.008 message: ' + JSON.stringify(pacs008[0]));",
					"        console.log('pacs.002 trigger payload: ' + JSON.stringify(pacs002[0]));",
					"",
					"        _pm.globals.set(\"pacs008\", JSON.stringify(pacs008[0]));",
					"        _pm.globals.set(\"pacs002\", JSON.stringify(pacs002[0]));",
					"        _pm.globals.set(\"dataCache\", JSON.stringify(dataCache[0]));",
					"        _pm.globals.set('debtorId', debtorId);",
					"        _pm.globals.set('debtorAccountId', debtorAccountId);",
					"        _pm.globals.set('debtorDoB', debtorDoB);",
					"        _pm.globals.set('creditorId', creditorId);",
					"        _pm.globals.set('creditorAccountId', creditorAccountId);",
					"        _pm.globals.set('timestampPacs008', timestampPacs008);",
					"        _pm.globals.set('timestampPacs002', timestampPacs002);",
					"        _pm.globals.set('endToEndId', endToEndId);",
					"        _pm.globals.set('pacs002Sts', pacs002Sts);",
					"        _pm.globals.set('currency', currency);",
					"        _pm.globals.set('amount', amount);",
					"        _pm.globals.set('transactionDescription', transactionDescription);",
					"        _pm.globals.set('transactionPurpose', transactionPurpose);",
					"        _pm.globals.set('transactionLat', transactionLat);",
					"        _pm.globals.set('transactionLong', transactionLong);",
					"        _pm.globals.set('messageIdPacs008', messageIdPacs008);",
					"        _pm.globals.set('messageIdPacs002', messageIdPacs002);",
					"        _pm.globals.set('baseTimestamp', timestampPacs008);",
					"        _pm.globals.set('debtorKey', debtorKey);",
					"        _pm.globals.set('debtorAccountKey', debtorAccountKey);",
					"        _pm.globals.set('creditorKey', creditorKey);",
					"        _pm.globals.set('creditorAccountKey', creditorAccountKey);",
					"        if (activePain001) {",
					"            _pm.globals.set(\"pain001\", JSON.stringify(pain001[0]));",
					"            _pm.globals.set(\"pain013\", JSON.stringify(pain013[0]));",
					"            _pm.globals.set('timestampPain001', timestampPain001);",
					"            _pm.globals.set('timestampPain013', timestampPain013);",
					"            _pm.globals.set('messageIdPain001', messageIdPain001);",
					"            _pm.globals.set('messageIdPain013', messageIdPain013);",
					"            _pm.globals.set('baseTimestamp', timestampPain001);",
					"        }",
					"",
					"        this.logDataCache(dataCache[0]);",
					"",
					"        if (activePain001) {",
					"            console.log(`Message IDs:",
					"                pain.001: ${_pm.globals.get(\"messageIdPain001\")}\",",
					"                pain.013: ${_pm.globals.get(\"messageIdPain013\")}\",",
					"                pacs.008: ${_pm.globals.get(\"messageIdPacs008\")}\",",
					"                pacs.002: ${_pm.globals.get(\"messageIdPacs002\")}\"",
					"            `);",
					"        } else {",
					"            console.log(`Message IDs:",
					"                pain.001: disabled\",",
					"                pain.013: disabled\",",
					"                pacs.008: ${_pm.globals.get(\"messageIdPacs008\")}\",",
					"                pacs.002: ${_pm.globals.get(\"messageIdPacs002\")}\"",
					"            `);",
					"        }",
					"    },",
					"",
					"    /**",
					"     * Creates an additional set of transactions for testing purposes, including all necessary data, and stores it in memory so that the transactions can be submitted to the API in sequence as valid messages.",
					"     * The transaction sets will include pain.001/013 messages if the environment variable activePain001 = true.",
					"     * The transaction set will contain a pacs.008 and a pacs.002 message.",
					"     * The messages in the set will be linked through the same EndToEndId.",
					"     * The function stashes created data in global variables can be retrieved with the `pm.globals.get()` method.",
					"     *",
					"     * @param {string|null|undefined} [debtorIdRef=null] - Reference identifier for the debtor. If provided, this ID will be used. Defaults to null, which means a new ID will be generated.",
					"     * @param {string|null|undefined} [debtorAccountIdRef=null] - Reference account identifier for the debtor. If provided, this ID will be used. Defaults to null, which means a new ID will be generated.",
					"     * @param {string|null|undefined} [creditorIdRef=null] - Reference identifier for the creditor. If provided, this ID will be used. Defaults to null, which means a new ID will be generated.",
					"     * @param {string|null|undefined} [creditorAccountIdRef=null] - Reference account identifier for the creditor. If provided, this ID will be used. Defaults to null, which means a new ID will be generated.",
					"     * @param {number|null|undefined} [timestampEpoch=0] - Epoch timestamp for adjusting transaction timestamps. Defaults to 0.",
					"     * @param {string|null|undefined} [currency='XTS'] - Currency code for the transaction amount. Defaults to 'XTS'.",
					"     * @param {number|null|undefined} [amount] - Transaction amount. Defaults to a random value between 10 and 1000.",
					"     * @param {string|null|undefined} [transactionDescription='Generic payment description'] - Description of the transaction. Defaults to 'Generic payment description'.",
					"     * @param {string|null|undefined} [pacs002Sts='ACCC'] - Transaction status for pacs.002.001.12 message. Defaults to 'ACCC' (a successful transaction).",
					"     * @param {number|null|undefined} [debtorAge=25] - Age of the debtor. Defaults to 25.",
					"     * @param {string|null|undefined} [transactionPurpose] - Purpose of the transaction. Defaults to 'TRANSFER' if pain.001/013 ingestion is enabled, otherwise 'MP2P'.",
					"     * @param {number|null|undefined} [transactionLat=-3.1609] - Latitude coordinate of the transaction location. Defaults to -3.1609.",
					"     * @param {number|null|undefined} [transactionLong=38.3588] - Longitude coordinate of the transaction location. Defaults to 38.3588.",
					"     */",
					"",
					"    createAdditionalTransactionSetInMemory: function (debtorIdRef, debtorAccountIdRef, creditorIdRef, creditorAccountIdRef, timestampEpoch, currency, amount, transactionDescription, pacs002Sts, debtorAge, transactionPurpose, transactionLat, transactionLong) {",
					"",
					"        // Variables for test data parameterisation",
					"        const activePain001 = JSON.parse(_pm.environment.get('activePain001'));",
					"        activePain001 ? console.log(\"pain.001/013 ingestion is enabled\") : console.log(\"pain.001/013 ingestion is disabled\");",
					"",
					"        // Essential defaults",
					"        timestampEpoch = timestampEpoch ? timestampEpoch : 0;",
					"        currency = currency ? currency : 'XTS';",
					"        amount = amount ? amount : Math.round((Math.random() * (1000 - 10) + 10) * 100) / 100;",
					"        transactionDescription = transactionDescription ? transactionDescription : 'Generic payment description';",
					"        pacs002Sts = pacs002Sts ? pacs002Sts : 'ACCC';",
					"        debtorAge = debtorAge ? debtorAge : 25;",
					"        if (activePain001) {",
					"            transactionPurpose = transactionPurpose ? transactionPurpose : 'TRANSFER' // or 'WITHDRAWAL', or 'PAYMENT'",
					"        } else {",
					"            transactionPurpose = transactionPurpose ? transactionPurpose : 'MP2P' // or 'MP2B', or 'CASH'",
					"        }",
					"        transactionLat = transactionLat ? transactionLat : -3.1609",
					"        transactionLong = transactionLong ? transactionLong : 38.3588",
					"",
					"        // Defaults",
					"        const timestampInterval = 300000; // 300,000 milliseconds = 5 minutes",
					"",
					"        let debtorId = debtorIdRef || 'dbtr_' + uuid.v4().replace(/-/g, '') + debtorIdType;",
					"        let debtorAccountId = debtorAccountIdRef || 'dbtrAcct_' + uuid.v4().replace(/-/g, '') + debtorAccountType + debtorAgentId;",
					"        let creditorId = creditorIdRef || 'cdtr_' + uuid.v4().replace(/-/g, '') + creditorIdType;",
					"        let creditorAccountId = creditorAccountIdRef || 'cdtrAcct_' + uuid.v4().replace(/-/g, '') + debtorAccountType + creditorAgentId;",
					"",
					"        var debtorKey = debtorId;",
					"        var debtorAccountKey = debtorAccountId;",
					"        var creditorKey = creditorId;",
					"        var creditorAccountKey = creditorAccountId;",
					"",
					"        let debtorDoB = new Date(new Date().setDate(new Date().getDate() - (debtorAge * 366))).toISOString().substring(0, 10);",
					"        let timestampPacs008 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 1)).toISOString();",
					"        let timestampPacs002 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 0)).toISOString();",
					"        console.log(\"pacs.002 payload timestamp: \" + timestampPacs002);",
					"        let endToEndId = uuid.v4().replace(/-/g, '');",
					"        let messageIdPacs008 = uuid.v4().replace(/-/g, '');",
					"        let messageIdPacs002 = uuid.v4().replace(/-/g, '');",
					"",
					"        var timestampPain001;",
					"        var timestampPain013;",
					"        var messageIdPain001;",
					"        var messageIdPain013;",
					"",
					"        var pain001;",
					"        var pain013;",
					"        var baseCreDtTm;",
					"",
					"        if (activePain001) {",
					"            timestampPain001 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 3)).toISOString();",
					"            timestampPain013 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 2)).toISOString();",
					"            messageIdPain001 = uuid.v4().replace(/-/g, '');",
					"            messageIdPain013 = uuid.v4().replace(/-/g, '');",
					"",
					"            pain001 = [prep.prepPain001Msg(messageIdPain001, timestampPain001, debtorDoB, debtorId, debtorIdType, debtorAccountId, debtorAccountType, endToEndId, transactionPurpose, currency, amount, creditorId, creditorIdType, creditorAccountId, creditAccountType, transactionDescription, transactionLat, transactionLong)];",
					"",
					"            pain013 = [prep.prepPain013Msg(messageIdPain013, timestampPain013, debtorDoB, debtorId, debtorIdType, debtorAccountId, debtorAccountType, endToEndId, currency, amount, creditorId, creditorIdType, creditorAccountId, creditorAccountType, transactionLat, transactionLong)];",
					"            baseCreDtTm = timestampPain001;",
					"        } else {",
					"            baseCreDtTm = timestampPacs008;",
					"        }",
					"",
					"        const pacs008 = [prep.prepPacs008Msg(messageIdPacs008, timestampPacs008, endToEndId, currency, amount, debtorDoB, debtorId, debtorIdType, debtorAccountId, debtorAccountType, creditorId, creditorIdType, creditorAccountId, creditorAccountType, transactionPurpose, transactionDescription, transactionLat, transactionLong)];",
					"        let deleteTxTp = lodash.unset(pacs008[0],\"TxTp\");",
					"",
					"        const pacs002 = [prep.prepPacs002Msg(messageIdPacs002, timestampPacs002, endToEndId, pacs002Sts)];",
					"",
					"        const dataCache = [{",
					"            \"dbtrId\": `${debtorKey}`,",
					"            \"cdtrId\": `${creditorKey}`,",
					"            \"dbtrAcctId\": `${debtorAccountKey}`,",
					"            \"cdtrAcctId\": `${creditorAccountKey}`,",
					"            \"creDtTm\": `${baseCreDtTm}`,",
					"            \"amt\": {",
					"                \"amt\": amount,",
					"                \"ccy\": `${currency}`",
					"            }",
					"        }];",
					"",
					"        console.log('pacs.002 trigger payload: ' + JSON.stringify(pacs002[0]));",
					"",
					"        _pm.globals.set(\"pacs008\", JSON.stringify(pacs008[0]));",
					"        _pm.globals.set(\"pacs002\", JSON.stringify(pacs002[0]));",
					"        _pm.globals.set(\"dataCache\", JSON.stringify(dataCache[0]));",
					"        _pm.globals.set('debtorId', debtorId);",
					"        _pm.globals.set('debtorAccountId', debtorAccountId);",
					"        _pm.globals.set('debtorDoB', debtorDoB);",
					"        _pm.globals.set('creditorId', creditorId);",
					"        _pm.globals.set('creditorAccountId', creditorAccountId);",
					"        _pm.globals.set('timestampPacs008', timestampPacs008);",
					"        _pm.globals.set('timestampPacs002', timestampPacs002);",
					"        _pm.globals.set('endToEndId', endToEndId);",
					"        _pm.globals.set('pacs002Sts', pacs002Sts);",
					"        _pm.globals.set('currency', currency);",
					"        _pm.globals.set('amount', amount);",
					"        _pm.globals.set('transactionDescription', transactionDescription);",
					"        _pm.globals.set('transactionPurpose', transactionPurpose);",
					"        _pm.globals.set('transactionLat', transactionLat);",
					"        _pm.globals.set('transactionLong', transactionLong);",
					"        _pm.globals.set('messageIdPacs008', messageIdPacs008);",
					"        _pm.globals.set('messageIdPacs002', messageIdPacs002);",
					"        _pm.globals.set('baseTimestamp', timestampPacs008);",
					"        _pm.globals.set('debtorKey', debtorKey);",
					"        _pm.globals.set('debtorAccountKey', debtorAccountKey);",
					"        _pm.globals.set('creditorKey', creditorKey);",
					"        _pm.globals.set('creditorAccountKey', creditorAccountKey);",
					"        if (activePain001) {",
					"            _pm.globals.set(\"pain001\", JSON.stringify(pain001[0]));",
					"            _pm.globals.set(\"pain013\", JSON.stringify(pain013[0]));",
					"            _pm.globals.set('timestampPain001', timestampPain001);",
					"            _pm.globals.set('timestampPain013', timestampPain013);",
					"            _pm.globals.set('messageIdPain001', messageIdPain001);",
					"            _pm.globals.set('messageIdPain013', messageIdPain013);",
					"            _pm.globals.set('baseTimestamp', timestampPain001);",
					"        }",
					"",
					"        this.logDataCache(dataCache[0]);",
					"",
					"        if (activePain001) {",
					"            console.log(`Message IDs:",
					"                pain.001: ${_pm.globals.get(\"messageIdPain001\")}\",",
					"                pain.013: ${_pm.globals.get(\"messageIdPain013\")}\",",
					"                pacs.008: ${_pm.globals.get(\"messageIdPacs008\")}\",",
					"                pacs.002: ${_pm.globals.get(\"messageIdPacs002\")}\"",
					"            `);",
					"        } else {",
					"            console.log(`Message IDs:",
					"                pain.001: disabled\",",
					"                pain.013: disabled\",",
					"                pacs.008: ${_pm.globals.get(\"messageIdPacs008\")}\",",
					"                pacs.002: ${_pm.globals.get(\"messageIdPacs002\")}\"",
					"            `);",
					"        }",
					"    },",
					"",
					"    /**",
					"     * Creates a new PACS.008 transaction with all associated details and identifiers.",
					"     *",
					"     * @param {number|null|undefined} [timestampEpoch=0] - Epoch timestamp for adjusting transaction timestamps.",
					"     * @param {string|null|undefined} [currency='XTS'] - Currency code for the transaction.",
					"     * @param {number|null|undefined} [amount=random value] - Transaction amount, defaults to a random value between 10 and 1000.",
					"     * @param {string|null|undefined} [transactionDescription='Generic payment description'] - Description of the transaction.",
					"     * @param {string|null|undefined} [pacs002Sts='ACCC'] - Status for the PACS.002 message.",
					"     * @param {number|null|undefined} [debtorAge=25] - Age of the debtor.",
					"     * @param {string|null|undefined} [transactionPurpose='TRANSFER' or 'MP2P'] - Purpose of the transaction, defaults based on whether pain.001/013 ingestion is active.",
					"     * @param {number|null|undefined} [transactionLat=-3.1609] - Latitude of the transaction's location.",
					"     * @param {number|null|undefined} [transactionLong=38.3588] - Longitude of the transaction's location.",
					"     * @returns {Object} The created PACS.008 transaction object.",
					"     */",
					"",
					"    createNewPacs008Transaction: function (timestampEpoch, currency, amount, transactionDescription, pacs002Sts, debtorAge, transactionPurpose, transactionLat, transactionLong) {",
					"",
					"",
					"        // Variables for test data parameterisation",
					"        const activePain001 = JSON.parse(_pm.environment.get('activePain001'));",
					"",
					"        // Essential defaults",
					"        timestampEpoch = timestampEpoch ? timestampEpoch : 0;",
					"        currency = currency ? currency : 'XTS';",
					"        amount = amount ? amount : Math.round((Math.random() * (1000 - 10) + 10) * 100) / 100;",
					"        transactionDescription = transactionDescription ? transactionDescription : 'Generic payment description';",
					"        pacs002Sts = pacs002Sts ? pacs002Sts : 'ACCC';",
					"        debtorAge = debtorAge ? debtorAge : 25;",
					"        if (activePain001) {",
					"            transactionPurpose = transactionPurpose ? transactionPurpose : 'TRANSFER' // or 'WITHDRAWAL', or 'PAYMENT'",
					"        } else {",
					"            transactionPurpose = transactionPurpose ? transactionPurpose : 'MP2P' // or 'MP2B', or 'CASH'",
					"        }",
					"        transactionLat = transactionLat ? transactionLat : -3.1609",
					"        transactionLong = transactionLong ? transactionLong : 38.3588",
					"",
					"        // Defaults",
					"        const timestampInterval = 300000; // 300,000 milliseconds = 5 minutes",
					"        let debtorId = uuid.v4().replace(/-/g, '');",
					"        let debtorAccountId = uuid.v4().replace(/-/g, '');",
					"        let creditorId = uuid.v4().replace(/-/g, '');",
					"        let creditorAccountId = uuid.v4().replace(/-/g, '');",
					"        let debtorDoB = new Date(new Date().setDate(new Date().getDate() - (debtorAge * 366))).toISOString().substring(0, 10);",
					"        let timestampPacs008 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 1)).toISOString();",
					"        let timestampPacs002 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 0)).toISOString();",
					"        let endToEndId = uuid.v4().replace(/-/g, '');",
					"        let messageIdPacs008 = uuid.v4().replace(/-/g, '');",
					"        let messageIdPacs002 = uuid.v4().replace(/-/g, '');",
					"",
					"        var timestampPain001;",
					"        var timestampPain013;",
					"        var messageIdPain001;",
					"        var messageIdPain013;",
					"",
					"        var pain001;",
					"        var pain013;",
					"        var baseCreDtTm;",
					"",
					"        if (activePain001) {",
					"            timestampPain001 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 3)).toISOString();",
					"            timestampPain013 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 2)).toISOString();",
					"            messageIdPain001 = uuid.v4().replace(/-/g, '');",
					"            messageIdPain013 = uuid.v4().replace(/-/g, '');",
					"",
					"            pain001 = [prep.prepPain001Msg(messageIdPain001, timestampPain001, debtorDoB, debtorId, debtorIdType, debtorAccountId, debtorAccountType, endToEndId, transactionPurpose, currency, amount, creditorId, creditorIdType, creditorAccountId, creditAccountType, transactionDescription, transactionLat, transactionLong)];",
					"",
					"            pain013 = [prep.prepPain013Msg(messageIdPain013, timestampPain013, debtorDoB, debtorId, debtorIdType, debtorAccountId, debtorAccountType, endToEndId, currency, amount, creditorId, creditorIdType, creditorAccountId, creditorAccountType, transactionLat, transactionLong)];",
					"            baseCreDtTm = timestampPain001;",
					"        } else {",
					"            baseCreDtTm = timestampPacs008;",
					"        }",
					"",
					"        const pacs008 = [prep.prepPacs008Msg(messageIdPacs008, timestampPacs008, endToEndId, currency, amount, debtorDoB, debtorId, debtorIdType, debtorAccountId, debtorAccountType, creditorId, creditorIdType, creditorAccountId, creditorAccountType, transactionPurpose, transactionDescription, transactionLat, transactionLong)];",
					"",
					"        const pacs002 = [prep.prepPacs002Msg(messageIdPacs002, timestampPacs002, endToEndId, pacs002Sts)];",
					"",
					"        return pacs008[0];",
					"    },",
					"",
					"    /**",
					"     * Creates a new PACS.002 transaction with all associated details and identifiers.",
					"     *",
					"     * @param {number|null|undefined} [timestampEpoch=0] - Epoch timestamp for adjusting transaction timestamps.",
					"     * @param {string|null|undefined} [currency='XTS'] - Currency code for the transaction.",
					"     * @param {number|null|undefined} [amount=random value] - Transaction amount, defaults to a random value between 10 and 1000.",
					"     * @param {string|null|undefined} [transactionDescription='Generic payment description'] - Description of the transaction.",
					"     * @param {string|null|undefined} [pacs002Sts='ACCC'] - Status for the PACS.002 message.",
					"     * @param {number|null|undefined} [debtorAge=25] - Age of the debtor.",
					"     * @param {string|null|undefined} [transactionPurpose='TRANSFER' or 'MP2P'] - Purpose of the transaction, defaults based on whether pain.001/013 ingestion is active.",
					"     * @param {number|null|undefined} [transactionLat=-3.1609] - Latitude of the transaction's location.",
					"     * @param {number|null|undefined} [transactionLong=38.3588] - Longitude of the transaction's location.",
					"     * @returns {Object} The created PACS.002 transaction object.",
					"     */",
					"",
					"    createNewPacs002Transaction: function (timestampEpoch, currency, amount, transactionDescription, pacs002Sts, debtorAge, transactionPurpose, transactionLat, transactionLong) {",
					"",
					"",
					"        // Variables for test data parameterisation",
					"        const activePain001 = JSON.parse(_pm.environment.get('activePain001'));",
					"",
					"        // Essential defaults",
					"        timestampEpoch = timestampEpoch ? timestampEpoch : 0;",
					"        currency = currency ? currency : 'XTS';",
					"        amount = amount ? amount : Math.round((Math.random() * (1000 - 10) + 10) * 100) / 100;",
					"        transactionDescription = transactionDescription ? transactionDescription : 'Generic payment description';",
					"        pacs002Sts = pacs002Sts ? pacs002Sts : 'ACCC';",
					"        debtorAge = debtorAge ? debtorAge : 25;",
					"        if (activePain001) {",
					"            transactionPurpose = transactionPurpose ? transactionPurpose : 'TRANSFER' // or 'WITHDRAWAL', or 'PAYMENT'",
					"        } else {",
					"            transactionPurpose = transactionPurpose ? transactionPurpose : 'MP2P' // or 'MP2B', or 'CASH'",
					"        }",
					"        transactionLat = transactionLat ? transactionLat : -3.1609",
					"        transactionLong = transactionLong ? transactionLong : 38.3588",
					"",
					"        // Defaults",
					"        const timestampInterval = 300000; // 300,000 milliseconds = 5 minutes",
					"        let debtorId = uuid.v4().replace(/-/g, '');",
					"        let debtorAccountId = uuid.v4().replace(/-/g, '');",
					"        let creditorId = uuid.v4().replace(/-/g, '');",
					"        let creditorAccountId = uuid.v4().replace(/-/g, '');",
					"        let debtorDoB = new Date(new Date().setDate(new Date().getDate() - (debtorAge * 366))).toISOString().substring(0, 10);",
					"        let timestampPacs008 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 1)).toISOString();",
					"        let timestampPacs002 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 0)).toISOString();",
					"        let endToEndId = uuid.v4().replace(/-/g, '');",
					"        let messageIdPacs008 = uuid.v4().replace(/-/g, '');",
					"        let messageIdPacs002 = uuid.v4().replace(/-/g, '');",
					"",
					"        var timestampPain001;",
					"        var timestampPain013;",
					"        var messageIdPain001;",
					"        var messageIdPain013;",
					"",
					"        var pain001;",
					"        var pain013;",
					"        var baseCreDtTm;",
					"",
					"        if (activePain001) {",
					"            timestampPain001 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 3)).toISOString();",
					"            timestampPain013 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 2)).toISOString();",
					"            messageIdPain001 = uuid.v4().replace(/-/g, '');",
					"            messageIdPain013 = uuid.v4().replace(/-/g, '');",
					"",
					"            pain001 = [prep.prepPain001Msg(messageIdPain001, timestampPain001, debtorDoB, debtorId, debtorIdType, debtorAccountId, debtorAccountType, endToEndId, transactionPurpose, currency, amount, creditorId, creditorIdType, creditorAccountId, creditAccountType, transactionDescription, transactionLat, transactionLong)];",
					"",
					"            pain013 = [prep.prepPain013Msg(messageIdPain013, timestampPain013, debtorDoB, debtorId, debtorIdType, debtorAccountId, debtorAccountType, endToEndId, currency, amount, creditorId, creditorIdType, creditorAccountId, creditorAccountType, transactionLat, transactionLong)];",
					"            baseCreDtTm = timestampPain001;",
					"        } else {",
					"            baseCreDtTm = timestampPacs008;",
					"        }",
					"",
					"        const pacs008 = [prep.prepPacs008Msg(messageIdPacs008, timestampPacs008, endToEndId, currency, amount, debtorDoB, debtorId, debtorIdType, debtorAccountId, debtorAccountType, creditorId, creditorIdType, creditorAccountId, creditorAccountType, transactionPurpose, transactionDescription, transactionLat, transactionLong)];",
					"",
					"        const pacs002 = [prep.prepPacs002Msg(messageIdPacs002, timestampPacs002, endToEndId, pacs002Sts)];",
					"",
					"        return pacs002[0];",
					"    },",
					"",
					"    getRuleBody: function (ruleId, ruleCfgVer, messageBody, dataCache) {",
					"        ruleId = ruleId ? ruleId : '901@1.0.0';",
					"        ruleCfgVer = ruleCfgVer ? ruleCfgVer : '1.0.0';",
					"        const natsPub = `pub-rule-${ruleId}`;",
					"        const natsSub = `sub-rule-${ruleId}`;",
					"        const msgId = messageBody.FIToFIPmtSts.GrpHdr.MsgId;",
					"        return JSON.stringify({",
					"            \"destination\": `${natsSub}`,",
					"            \"consumer\": `${natsPub}`,",
					"            \"functionName\": `${msgId}`,",
					"            \"message\": {",
					"                \"transaction\": messageBody,",
					"                \"DataCache\": dataCache,",
					"                \"networkMap\": {",
					"                    \"name\": \"Step-by-step processor testing - rule output to NATS REST proxy\",",
					"                    \"active\": true,",
					"                    \"cfg\": \"1.0.0\",",
					"                    \"messages\": [",
					"                        {",
					"                            \"id\": \"004@1.0.0\",",
					"                            \"cfg\": \"1.0.0\",",
					"                            \"txTp\": \"pacs.002.001.12\",",
					"                            \"typologies\": [",
					"                                {",
					"                                    \"id\": \"typology_999@1.0.0\",",
					"                                    \"cfg\": \"1.0.0\",",
					"                                    \"rules\": [",
					"                                        {",
					"                                            \"id\": `${ruleId}`,",
					"                                            \"cfg\": `${ruleCfgVer}`",
					"                                        }",
					"                                    ]",
					"                                }",
					"                            ]",
					"                        }",
					"                    ]",
					"                },",
					"                \"metaData\": {",
					"                    \"prcgTmDP\": 0,",
					"                    \"traceParent\": `00-postman-${msgId}-01`,",
					"                    \"prcgTmCRSP\": 0",
					"                }",
					"            }",
					"        });",
					"    }",
					"",
					"}"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	]
}